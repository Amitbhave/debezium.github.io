<!DOCTYPE html> <html lang="en"> <head> <title>Debezium Connector for MySQL</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="" name="description"> <meta content="" name="author"> <link href="http://static.jboss.org/theme/css/bootstrap-community/3.2.0.1/bootstrap-community.min.css" media="screen" rel="stylesheet"> <!--[if lt IE 9]><script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--> <link href="http://static.jboss.org/example/images/favicon.ico" rel="shortcut icon"> <link href="http://static.jboss.org/example/images/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="http://static.jboss.org/example/images/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="http://static.jboss.org/example/images/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="http://static.jboss.org/example/images/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="/stylesheets/debezium.css" rel="stylesheet" type="text/css"> <style>
      @media (min-width: 980px) {
        .banner { background-image: url(http://static.jboss.org/example/images/debezium-banner-1180px.png); height: 110px;  }
      }
      @media (max-width: 979px) {
        .banner { background-image: url(http://static.jboss.org/example/images/debezium-logo.png); background-repeat:no-repeat; background-position: center bottom; height: 60px; }
      }
      @media (max-width: 650px) {
        .banner { width: 100%; margin: 0px auto; }
      }
      @media (max-width: 450px) {
        .banner { height: 90px; }
      }
    </style> <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css" rel="stylesheet"> <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> <script src="http://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <style>
      /* adjusting the vertical spacing for when a stickynav is engaged */
      .breadcrumb-fixed > .active {
        color: #8c8f91;
      }
      .breadcrumb-fixed {
        margin: 70px 0 10px;
        padding: 8px 15px;
        margin-bottom: 20px;
        list-style: none;
        background-color: #f5f5f5;
        border-radius: 4px;
      }
      
      .breadcrumb-fixed > li {
        display: inline-block;
      }
    </style> </head> <body> <div id="rhbar"> <a class="jbdevlogo" href="http://www.jboss.org/projects/about"></a> <a class="rhlogo" href="http://www.redhat.com/"></a> </div> <div id=""> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div class="container" id="content"> <div class="navbar navbar-inverse navbar-fix"> <div class="container-fluid"> <div class="navbar-header"> <button class="navbar-toggle collapsed" data-target="#navbar-1" data-toggle="collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> Debezium </a> </div> <div class="collapse navbar-collapse" id="navbar-1"> <ul class="nav navbar-nav pull-right"> <li class=""><a href="/docs/faq">FAQ</a></li> <li class="active"><a href="/docs">DOCS</a></li> <li class=""><a href="/community">COMMUNITY</a></li> <li class=""><a href="/blog">BLOG</a></li> </ul> </div> </div> </div> <div id="equalHeightsLayout"> <div class="col-sm-3" id="leftdocnav"> <div class="panel-group" id="accordion1"> <div class="panel panel-docnav"> <div class="panel-heading"> <h4 class="panel-title"> <a class="accordion-toggle" data-parent="#accordion1,#accordion2,#accordion3,#accordion4" data-toggle="collapse" href="#collapse1"> Get Started </a> </h4> </div> <div class="collapse panel-collapse" id="collapse1"><div class="panel-body"> <ul class="list-group"> <li class="list-group-item"><a href="/docs/concepts">Concepts</a></li> <li class="list-group-item"><a href="/docs/tutorial">Tutorial</a></li> <li class="list-group-item"><a href="/docs/install">Installing Debezium</a></li> <li class="list-group-item"><a href="/docs/embedded">Embedding Debezium</a></li> </ul> </div></div> </div> </div> <div class="panel-group" id="accordion2"> <div class="panel panel-docnav"> <div class="panel-heading"> <h4 class="panel-title"> <a class="accordion-toggle" data-parent="#accordion1,#accordion2,#accordion3,#accordion4" data-toggle="collapse" href="#collapse2"> Connectors </a> </h4> </div> <div class="collapse in panel-collapse" id="collapse2"><div class="panel-body"> <ul class="list-group"> <li class="active list-group-item"><a href="/docs/connectors/mysql">MySQL</a></li> <li class="list-group-item"><a href="/docs/connectors/mongodb">MongoDB</a></li> <li class="list-group-item"><a href="/docs/connectors/postgresql">PostgreSQL</a></li> <li class="list-group-item"><a href="/docs/connectors/oracle">Oracle</a></li> </ul> </div></div> </div> </div> <div class="panel-group" id="accordion3"> <div class="panel panel-docnav"> <div class="panel-heading"> <h4 class="panel-title"> <a class="accordion-toggle" data-parent="#accordion1,#accordion2,#accordion3,#accordion4" data-toggle="collapse" href="#collapse3"> How it works </a> </h4> </div> <div class="collapse panel-collapse" id="collapse3"><div class="panel-body"> <ul class="list-group"> <li class="list-group-item"><a href="/docs/faq">Frequently Asked Questions</a></li> <li class="list-group-item"><a href="/docs/architecture">Debezium Architecture</a></li> <li class="list-group-item"><a href="/docs/features">Debezium Features</a></li> </ul> </div></div> </div> </div> <div class="panel-group" id="accordion4"> <div class="panel panel-docnav"> <div class="panel-heading"> <h4 class="panel-title"> <a class="accordion-toggle" data-parent="#accordion1,#accordion2,#accordion3,#accordion4" data-toggle="collapse" href="#collapse4"> Contribute </a> </h4> </div> <div class="collapse panel-collapse" id="collapse4"><div class="panel-body"> <ul class="list-group"> <li class="list-group-item"><a href="/docs/contribute">Contribute to Debezium</a></li> <li class="list-group-item"><a href="/docs/code-of-conduct">Code of Conduct</a></li> <li class="list-group-item"> <a href="https://twitter.com/debezium">Twitter</a> </li> <li class="list-group-item"> <a href="https://gitter.im/debezium/dev">Chat</a> </li> <li class="list-group-item"> <a href="https://github.com/debezium/">Code</a> </li> <li class="list-group-item"> <a href="https://issues.jboss.org/projects/DBZ/issues">Issues</a> </li> </ul> </div></div> </div> </div> </div> <div class="col-sm-9" id="maincol"> <h1 class="title"> Debezium Connector for MySQL </h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>The MySQL connector allows Debezium to monitor and record all of the row-level changes in the databases on a single MySQL server cluster. The connector reads the <a href="http://dev.mysql.com/doc/refman/5.7/en/binary-log.html">MySQL server&#8217;s binlog</a>, which is part of <a href="http://dev.mysql.com/doc/refman/5.7/en/replication.html">MySQL&#8217;s replication mechanism</a> and which contains all of the changes made to the database schemas and to the data. All inserts, updates and deletes are then recorded as events in separate Kafka topics for each table.</p> </div> </div> </div> <div class="sect1"> <h2 id="_features">Features</h2> <div class="sectionbody"> <div class="paragraph"> <p>MySQL has the ability to record in its <em>binary log</em>, or <em>binlog</em>, all operations in the same order they are committed by the database. In fact, this is the mechanism by which MySQL can be replicated across multiple machines: the master database records the operations in its binlog, and replica servers read the master&#8217;s binlog and apply every operation to itself. The binlog is also an essential component of MySQL database recovery, since the binary log can be used after a backup has been restored to bring databases up to date from the point of the backup. Running a server with binary logging enabled will slightly reduce performance, although the benefits of the binary log in enabling replication and database recovery outweigh this minor performance decrement.</p> </div> <div class="paragraph"> <p>Debezium&#8217;s MySQL connector reads the same binary log produced by MySQL to understand what and in what order data has changed. It then produces for every row-level insert, update, and delete operations <em>change events</em> and records these to a separate Kafka topic for each table. Your client applications can therefore simply read those Kafka topics that correspond to the database tables its interested in following, and react to every row-level event it sees in those topics.</p> </div> <div class="paragraph"> <p>When a database client queries a database, it uses the database&#8217;s current schema. However, the database schema can be changed at any time, which means that the connector must know what the schema looked like at the time each insert, update, or delete operation is <em>recorded</em>. Luckily, MySQL includes in the binlog not only the row-level changes to the data but also the DDL statements as they are applied to the database. As the connector reads the binlog and comes across these DDL statements, it parses them and updates an in-memory representation of each table&#8217;s schema, which is then used to understand the structure of the tables at the time each insert, update, or delete occurs and to produce the appropriate change event. It also records in a separate <em>database history</em> Kafka topic all of the DDL statements along with the position in the binlog where each DDL statement appeared.</p> </div> <div class="paragraph"> <p>When the connector restarts after having crashed or been stopped gracefully, the connector will start reading the binlog from a specific position (or point in time). The connector has to rebuild the table structures that existed at this point in time, so it simply reads the database history Kafka topic and parses all DDL statements up until the point in the binlog where the connector is starting.</p> </div> <div class="paragraph"> <p>The connector&#8217;s reliance upon the binlog does mean the connector is limited to the data it can read from the binary log. MySQL may be configured to remove older portions of the binary log to save space. Additionally, some tables and data may have been created before the binlog was enabled on the server, in which case the DDL statements for those tables do not appear in the log and thus cannot be read. Although we are working on <a href="https://issues.jboss.org/projects/DBZ/issues/DBZ-31">eliminating these limitations</a>, it is often possible to work around them by starting a new MySQL replica server and populating it from the existing database. In this case, the new replica&#8217;s binlog will contain information for all tables and records.</p> </div> </div> </div> <div class="sect1"> <h2 id="_sample_usage">Sample usage</h2> <div class="sectionbody"> <div class="paragraph"> <p>Using the MySQL connector is straightforward. Here is an example of the configuration for a MySQL connector that monitors a MySQL server at port 3306 on 192.168.99.100, which we logically name <code>fullfillment</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-json" data-lang="json">{&#x000A;  "name": "inventory-connector",  <i class="conum" data-value="1"></i><b>(1)</b>&#x000A;  "config": {&#x000A;    "connector.class": "io.debezium.connector.mysql.MySqlConnector", <i class="conum" data-value="2"></i><b>(2)</b>&#x000A;    "database.hostname": "192.168.99.100", <i class="conum" data-value="3"></i><b>(3)</b>&#x000A;    "database.port": "3306", <i class="conum" data-value="4"></i><b>(4)</b>&#x000A;    "database.user": "replicator", <i class="conum" data-value="5"></i><b>(5)</b>&#x000A;    "database.password": "replpass", <i class="conum" data-value="6"></i><b>(6)</b>&#x000A;    "database.server.id": "184054", <i class="conum" data-value="7"></i><b>(7)</b>&#x000A;    "database.server.name": "fullfillment", <i class="conum" data-value="8"></i><b>(8)</b>&#x000A;    "database.binlog": "mysql-bin.000001", <i class="conum" data-value="9"></i><b>(9)</b>&#x000A;    "database.whitelist": "inventory", <i class="conum" data-value="10"></i><b>(10)</b>&#x000A;    "database.history.kafka.bootstrap.servers": "kafka:9092", <i class="conum" data-value="11"></i><b>(11)</b>&#x000A;    "database.history.kafka.topic": "schema-changes.inventory" <i class="conum" data-value="12"></i><b>(12)</b>&#x000A;  }&#x000A;}</code></pre> </div> </div> <div class="colist arabic"> <table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>The name of our connector when we register it with a Kafka Connect service.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>The name of this MySQL connector class.</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>The address of the MySQL server.</td> </tr> <tr> <td><i class="conum" data-value="4"></i><b>4</b></td> <td>The port number of the MySQL server.</td> </tr> <tr> <td><i class="conum" data-value="5"></i><b>5</b></td> <td>The name of the MySQL user that has privileges to read the binlog.</td> </tr> <tr> <td><i class="conum" data-value="6"></i><b>6</b></td> <td>The password for the MySQL user that has privileges to read the binlog.</td> </tr> <tr> <td><i class="conum" data-value="7"></i><b>7</b></td> <td>The identifier of the connector that must be unique within the MySQL cluster.</td> </tr> <tr> <td><i class="conum" data-value="8"></i><b>8</b></td> <td>The logical name of the MySQL server/cluster, which forms a namespace since it is used in all the names of the Kafka topics to which the connector writes.</td> </tr> <tr> <td><i class="conum" data-value="9"></i><b>9</b></td> <td>The name of the first binlog file that the connector should read.</td> </tr> <tr> <td><i class="conum" data-value="10"></i><b>10</b></td> <td>A list of all databases hosted by this server that this connector will monitor. This is optional, and there are other properties for listing the databases and tables to include or exclude from monitoring.</td> </tr> <tr> <td><i class="conum" data-value="11"></i><b>11</b></td> <td>The list of Kafka brokers that this connector will use to write and recover DDL statements to the database history topic.</td> </tr> <tr> <td><i class="conum" data-value="12"></i><b>12</b></td> <td>The name of the database history topic where the connector will write and recover DDL statements.</td> </tr> </table> </div> <div class="paragraph"> <p>This configuration can be sent via POST to a running Kafka Connect service, which will then record the configuration and start up the one connector task that will connect to the MySQL database, read the binlog, and record events to Kafka topics.</p> </div> </div> </div> <div class="sect1"> <h2 id="topic-names">Change event topics</h2> <div class="sectionbody"> <div class="paragraph"> <p>The MySQL connector writes events for all insert, update, and delete operations on a single table to a single Kafka topic. The name of the Kafka topics always takes the form <em>serverName</em>.<em>databaseName</em>.<em>tableName</em>, where <em>serverName</em> is the logical name of the connector as specified with the <code>database.server.name</code> configuration property, <em>databaseName</em> is the name of the database where the operation occurred, and <em>tableName</em> is the name of the database table on which the operation occurred.</p> </div> <div class="paragraph"> <p>For example, consider a MySQL installation with an <code>inventory</code> database that contains four tables: <code>products</code>, <code>products_on_hand</code>, <code>customers</code>, and <code>orders</code>. If the connector monitoring this database were given a logical server name of <code>fullfillment</code>, then the connector might produce events on these four Kafka topics:</p> </div> <div class="ulist"> <ul> <li> <p><code>fullfillment.inventory.products</code></p> </li> <li> <p><code>fullfillment.inventory.products_on_hand</code></p> </li> <li> <p><code>fullfillment.inventory.customers</code></p> </li> <li> <p><code>fullfillment.inventory.orders</code></p> </li> </ul> </div> <div class="paragraph"> <p>The connector produces an event message for each row insert, update, or delete on the respective table. Every event message contains a <em>key</em> that contains the values from the row&#8217;s primary or unique key columns, and a <em>value</em> that contains the new values for the row&#8217;s columns (the value is <code>null</code> for delete events). Both the message key and value are both described with a Kafka Connect&#8217;s Schema.</p> </div> <div class="paragraph"> <p>For example, consider that the <code>products</code> table is defined with:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">CREATE TABLE products (&#x000A;  id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,&#x000A;  name VARCHAR(255) NOT NULL,&#x000A;  description VARCHAR(512),&#x000A;  weight FLOAT&#x000A;);&#x000A;ALTER TABLE products AUTO_INCREMENT = 101;</code></pre> </div> </div> <div class="paragraph"> <p>Then an insert or update to this table will have a message key structured similarly to this JSON representation:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-json" data-lang="json">{&#x000A;  "schema": {&#x000A;    "type": "struct",&#x000A;    "fields": [&#x000A;      {&#x000A;        "type": "int32",&#x000A;        "optional": false,&#x000A;        "field": "id"&#x000A;      }&#x000A;    ],&#x000A;    "optional": false,&#x000A;    "name": "inventory.customers/pk"&#x000A;  },&#x000A;  "payload": {&#x000A;    "id": 1001&#x000A;  }&#x000A;}</code></pre> </div> </div> <div class="paragraph"> <p>and a message value structured similarly to this JSON representation:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-json" data-lang="json">{&#x000A;  "schema": {&#x000A;    "type": "struct",&#x000A;    "fields": [&#x000A;      {&#x000A;        "type": "int32",&#x000A;        "optional": false,&#x000A;        "field": "id"&#x000A;      },&#x000A;      {&#x000A;        "type": "string",&#x000A;        "optional": false,&#x000A;        "field": "first_name"&#x000A;      },&#x000A;      {&#x000A;        "type": "string",&#x000A;        "optional": false,&#x000A;        "field": "last_name"&#x000A;      },&#x000A;      {&#x000A;        "type": "string",&#x000A;        "optional": false,&#x000A;        "field": "email"&#x000A;      }&#x000A;    ],&#x000A;    "optional": false,&#x000A;    "name": "inventory.customers"&#x000A;  },&#x000A;  "payload": {&#x000A;    "id": 1001,&#x000A;    "first_name": "Sally",&#x000A;    "last_name": "Thomas",&#x000A;    "email": "sally.thomas@acme.com"&#x000A;  }&#x000A;}</code></pre> </div> </div> <div class="paragraph"> <p>Again, if the entire message value is null, then the event signals the record was deleted.</p> </div> <div class="paragraph"> <p>Note that the message key uses the primary or unique key of the record. If the table has no primary key or unique key, then an insert or update to this table will result in a message with no key and a value that contain the representation of the row&#8217;s values. The connector does <em>not</em> generate an event for a delete on a table with no primary or unique key.</p> </div> </div> </div> <div class="sect1"> <h2 id="schema-change-topic">Schema change topic</h2> <div class="sectionbody"> <div class="paragraph"> <p>The connector can optionally be configured to write out all DDL statements applied to databases in this server to a Kafka topic named <em>serverName</em>, where <em>serverName</em> is the logical name of the connector as specified with the <code>database.server.name</code> configuration property. Each message written to this topic will have a message key that contains the name of the database to which the DDL statement(s) apply:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-json" data-lang="json">{&#x000A;  "schema": {&#x000A;    "type": "string"&#x000A;  },&#x000A;  "payload": "inventory"&#x000A;}</code></pre> </div> </div> <div class="paragraph"> <p>while the message value will contain a JSON document containing the DDL statement(s) and the position in the binlog where the statement(s) appeared:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-json" data-lang="json">{&#x000A;  "schema": {&#x000A;    "type": "string"&#x000A;  },&#x000A;  "payload": "{&#x000A;    "source": {},&#x000A;    "position": {},&#x000A;    "databaseName": "inventory",&#x000A;    "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255) NOT NULL, description VARCHAR(512), weight FLOAT ); ALTER TABLE products AUTO_INCREMENT = 101;"&#x000A;  }"&#x000A;}</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="configuration">Configuration</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="prerequisites">Prerequisites</h3> <div class="paragraph"> <p>The MySQL server must be configured to use a row-level binary log, similar to the following fragment of a MySQL server configuration file:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>server-id         = 223344&#x000A;log_bin           = mysql-bin&#x000A;expire_logs_days  = 10&#x000A;binlog_format     = row</code></pre> </div> </div> <div class="paragraph"> <p>The server ID and prefix is both arbitrary, so you can use whatever values you deem appropriate. The expiration should be long enough to ensure the connector can process all of the events as they are recorded by the database. Finally, the binlog format <em>must</em> be <code>row</code>.</p> </div> <div class="paragraph"> <p>Likewise, a MySQL user must be defined that has both "REPLICATION SLAVE" and "REPLICATION CLIENT" roles. This can be created with a statement similar to the following:</p> </div> <div class="literalblock"> <div class="content"> <pre>GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'replicator' IDENTIFIED BY 'replpass';</pre> </div> </div> <div class="paragraph"> <p>This grant is equivalent to specifying any authenticating client on <em>any</em> hosts, but this is not recommended for production. Instead, in production you would almost certainly limit the replication user to the machine(s) where the MySQL connector is running within a Kafka Connect service, such as <code>'replicator'@'connect.host.acme.com'</code>.</p> </div> </div> <div class="sect2"> <h3 id="properties">Connector Configuration Properties</h3> <div class="paragraph"> <p>The following configuration properties are <em>required</em> unless a default value is available.</p> </div> <table class="tableblock frame-all grid-all spread table table-bordered table-striped"> <colgroup> <col style="width: 35%;"> <col style="width: 10%;"> <col style="width: 55%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Property</th> <th class="tableblock halign-left valign-top">Default</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tfoot> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>connect.timeout.ms</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>30000</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>A positive integer value that specifies the maximum time in milliseconds this connector should wait after trying to connect to the MySQL database server before timing out. Defaults to 30 seconds.</p> </div></div></td> </tr> </tfoot> <tbody> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>name</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Unique name for the connector. Attempting to register again with the same name will fail. (This property is required by all Kafka Connect connectors.)</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>connector.class</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>The name of the Java class for the connector. Always use a value of <code>io.debezium.connector.mysql.MySqlConnector</code> for the MySQL connector.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>tasks.max</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>1</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>The maximum number of tasks that should be created for this connector. The MySQL connector always uses a single task and therefore does not use this value, so the default is always acceptable.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.hostname</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>IP address or hostname of the MySQL database server.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.port</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>3306</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Integer port number of the MySQL database server.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.user</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Name of the MySQL database to use when when connecting to the MySQL database server.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.password</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Password to use when when connecting to the MySQL database server.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.binlog</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>The name of the first binlog file (including basename, number, and extension) on the MySQL server that should be processed by this connector. The MySQL server must be <a href="http://dev.mysql.com/doc/refman/5.7/en/replication-howto-masterbaseconfig.html">configured for replication</a>, and this will include a <code>log_bin</code> configuration property that specifies the base name that will be used as the prefix for all binlog files.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.server.name</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><em>host:port</em></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Logical name that identifies and provides a namespace for the particular MySQL database server/cluster being monitored. The logical name should be unique across all other connectors, since it is used as a prefix for all Kafka topic names eminating from this connector. Defaults to '<em>host</em>:_port_', where <em>host</em> is the value of the <code>database.hostname</code> property and <em>port</em> is the value of the <code>database.port</code> property, though we recommend using an explicit and meaningful logical name.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.server.id</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><em>random</em></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>A numeric ID of this database client, which must be unique across all currently-running database processes in the MySQL cluster. This connector joins the MySQL database cluster as another server (with this unique ID) so it can read the binlog. By default, a random number is generated between 5400 and 6400, though we recommend setting an explicit value.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.history.kafka.topic</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>The full name of the Kafka topic where the connector will store the database schema history.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.history.kafka.bootstrap.servers</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>A list of host/port pairs that the connector will use for establishing an initial connection to the Kafka cluster. This connection will be used to retrieving database schema history previously stored by the connector, and for writing each DDL statement read from the source database. This should point to the same Kafka cluster used by the Kafka Connect process.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.whitelist</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><em>empty string</em></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>An optional comma-separated list of database names to be monitored; any database name not included in the whitelist will be excluded from monitoring. By default all databases will be monitoried. May not be used with <code>database.blacklist</code>.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.blacklist</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><em>empty string</em></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>An optional comma-separated list of database names to be excluded from monitoring; any database name not included in the blacklist will be monitored. May not be used with <code>database.whitelist</code>.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>table.whitelist</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><em>empty string</em></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>An optional comma-separated list of identifiers for tables to be monitored; any table not included in the whitelist will be excluded from monitoring. Each identifer is of the form <em>databaseName</em>.<em>tableName</em>. By default the connector will monitor every non-system table in each monitored database. May not be used with <code>table.blacklist</code>.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>table.blacklist</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><em>empty string</em></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>An optional comma-separated list of identifiers for tables to be excluded from monitoring; any table not included in the blacklist will be monitored. Each identifer is of the form <em>databaseName</em>.<em>tableName</em>. May not be used with <code>table.whitelist</code>.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>include.schema.changes</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>false</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Boolean value that specifies whether the connector should publish changes in the database schema to a Kafka topic with the same name as the database server ID. Each schema change will be recorded using a key that contains the database name and whose value includes the DDL statement(s). This is independent of how the connector internally records database history. The default is <code>false</code>.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>max.batch.size</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>2048</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Positive integer value that specifies the maximum size of the blocking queue into which change events read from the database log are placed before they are written to Kafka. This queue can provide backpressure to the binlog reader when, for example, writes to Kafka are slower or if Kafka is not available. Events that appear in the queue are not included in the offsets periodically recorded by this connector. Defaults to 2048, and should always be larger than the maximum batch size specified in the <code>max.batch.size</code> property.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>max.queue.size</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>1024</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Positive integer value that specifies the maximum size of each batch of events that should be processed during each iteration of this connector. Defaults to 1024.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>poll.interval.ms</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>1000</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Positive integer value that specifies the number of milliseconds the connector should wait during each iteration for new change events to appear. Defaults to 1000 milliseconds, or 1 second.</p> </div></div></td> </tr> </tbody> </table> <div class="paragraph"> <p>The following <em>advanced</em> configuration properties have good defaults that will work in most situations and therefore rarely need to be specified in the connector&#8217;s configuration.</p> </div> <table class="tableblock frame-all grid-all spread table table-bordered table-striped"> <colgroup> <col style="width: 35%;"> <col style="width: 10%;"> <col style="width: 55%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Property</th> <th class="tableblock halign-left valign-top">Default</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tfoot> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.history.kafka.recovery.attempts</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>4</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>The maximum number of times that the connector should attempt to read persisted history data before the connector recovery fails with an error. The maximum amount of time to wait after receiving no data is <code>recovery.attempts</code> x <code>recovery.poll.interval.ms</code>.</p> </div></div></td> </tr> </tfoot> <tbody> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>connect.keep.alive</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>true</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>A boolean value that specifies whether a separate thread should be used to ensure the connection to the MySQL server/cluster is kept alive.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>table.ignore.builtin</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>true</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>Boolean value that specifies whether built-in system tables should be ignored. This applies regardless of the table whitelist or blacklists. By default system tables are excluded from monitoring, and no events are generated when changes are made to any of the system tables.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>database.history.kafka.recovery.poll.interval.ms</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p><code>100</code></p> </div></div></td> <td class="tableblock halign-left valign-top"><div><div class="paragraph"> <p>An integer value that specifies the maximum number of milliseconds the connector should wait during startup/recovery while polling for persisted data. The default is 100ms.</p> </div></div></td> </tr> </tbody> </table> </div> </div> </div> </div> </div> </div> <footer class="container"> <div class="row"> <div class="col-md-5 col-md-offset-1"> <h4>Debezium</h4> <p> &#169; 2016 Debezium Community <br> <br> <i class="icon-fire"></i> Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>, baked by <a href="http://awestruct.org">Awestruct</a>. <br> <i class="icon-flag"></i> Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>. <br> <i class="icon-flag-alt"></i> Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>. <br> <i class="icon-file-alt"></i> <a href="http://www.redhat.com/legal/legal_statement.html" title="Terms">Terms</a> | <a href="http://www.redhat.com/legal/privacy_statement.html" title="Privacy Policy">Privacy</a> </p> </div> <div class="col-md-3"> <h4>Documentation</h4> <ul class="list-unstyled"> <li> <a href="/docs/features" title="Features">Features</a> </li> <li> <a href="/docs/deploy" title="Deploy">Deploy</a> </li> <li> <a href="/docs/manage" title="Manage">Manage</a> </li> <li> <a href="/docs/architecture" title="Architecture">Architecture</a> </li> <li> <a href="/docs/faq" title="FAQ">FAQ</a> </li> <li> <a href="/docs/contribute" title="Contribute">Contribute</a> </li> </ul> </div> <div class="col-md-3"> <h4>Connect</h4> <ul class="list-unstyled"> <li> <a href="/blog" title="Blog">Blog</a> </li> <li> <a href="http://twitter.com/debezium" title="Twitter">Twitter</a> </li> <li> <a href="http://github.com/debezium" title="GitHub">GitHub</a> </li> <li> <a href="https://gitter.im/debezium/dev" title="Chat">Chat</a> </li> <li> <a href="https://groups.google.com/forum/#!forum/debezium" title="Google Groups">Google Groups</a> </li> <li> <a href="http://stackoverflow.com/questions/tagged/debezium" title="StackOverflow">StackOverflow</a> </li> </ul> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="http://static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="http://static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.1/bootstrap-community.min.js"></script> <script type='text/javascript' language='JavaScript' src='http://www.redhat.com/j/elqNow/elqCfg.js'></script> <script type='text/javascript' language='JavaScript' src='http://www.redhat.com/j/elqNow/elqImg.js'></script> <div id="oTags"> <script type="text/javascript" src="//www.redhat.com/j/s_code.js"></script> <script type="text/javascript"><!--
        var coreUrl = encodeURI(document.URL.split("?")[0]).replace(/-/g," ");
        var urlSplit = coreUrl.toLowerCase().split(/\//);
        var urlLast = urlSplit[urlSplit.length-1];
        var pageNameString = "";
        var siteName = "";
        var minorSectionIndex = 3
        if (urlLast == "") {
            urlSplit.splice(-1,1);
        }
        if (urlLast.search(/\./) >= 0) {
            if (urlLast == "index.html") {
                urlSplit.splice(-1,1);
            }
            else {
                urlSplit[urlSplit.length-1] = urlLast.split(".").splice(0,1);
            }
        }
        siteName = urlSplit[2].split(".")[1];
        s.prop14 = s.eVar27 = siteName || "";
        s.prop15 = s.eVar28 = urlSplit[minorSectionIndex] || "";
        s.prop16 = s.eVar29 = urlSplit[minorSectionIndex+1] || "";
        pageNameString = urlSplit.splice(3).join(" | ");
        s.pageName = "jboss | community | " + siteName + " | " + pageNameString;
        s.server = "jboss";
        s.channel = "jboss | community";
        s.prop4 = s.eVar23 = encodeURI(document.URL);
        s.prop21 = s.eVar18 = coreUrl;
        s.prop2 = s.eVar22 = "en";
        s.prop3 = s.eVar19 = "us";
        //--></script> <script type="text/javascript" src="//www.redhat.com/j/rh_omni_footer.js"></script> <script language="JavaScript" type="text/javascript"><!--
        if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
        //--></script> <noscript><a href="http://www.omniture.com" title="Web Analytics"><img src="https://smtrcs.redhat.com/b/ss/redhatcom,redhatglobal/1/H.25.4--NS/0?[AQB]&cdp=3&[AQE]" height="1" width="1" border="0" alt=""/></a></noscript> </div> <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      </script> <script type="text/javascript">
      try {
      var pageTracker = _gat._getTracker("UA-10656779-1");
      pageTracker._trackPageview();
      } catch(err) {}</script> <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      
                          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      
                          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      
                          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       
      ga('create', 'UA-76464546-1', 'auto');
      ga('send', 'pageview');
      ga('set', 'anonymizeIp', true);
      ga('require', 'linkid', 'linkid.js');
      
      </script> </div> </body> </html>