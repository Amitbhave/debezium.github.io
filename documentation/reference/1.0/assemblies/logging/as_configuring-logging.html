<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuring logging :: Debezium Documentation</title>
    <link rel="canonical" href="https://www.debezium.io/documentation/reference/assemblies/logging/as_configuring-logging.html">
    <meta name="generator" content="Antora 2.3.0-alpha.2">
<link rel="stylesheet" href="../../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
<script src="../../../../debezium-antora/js/jquery.ba-floatingscrollbar.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://www.jboss.org/projects/about"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Debezium Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/outbox-event-router.html">Outbox Event Router</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../connectors/mysql.html">MySQL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_overview-of-how-the-mysql-connector-works.html">How It Works</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_setup-the-mysql-server.html">Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_deploy-the-mysql-connector.html">Deployment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_connector-common-issues.html">Common Issues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/cassandra.html">Cassandra</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/serdes.html">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/testcontainers.html">Integration Testing with Testcontainers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/embedded.html">Embedding Debezium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../1.1/index.html">1.1</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">1.0</a>
        </li>
        <li class="version">
          <a href="../../../0.10/index.html">0.10</a>
        </li>
        <li class="version">
          <a href="../../../0.9/index.html">0.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Debezium Documentation</a></li>
    <li><a href="as_configuring-logging.html">Configuring logging</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">1.0</button>
        <!--<button class="version-menu-toggle versions-menu-select" title="Select other versions">Select</button>-->
        <div class="version-menu">
                <a class="version" href="../../../assemblies/logging/as_configuring-logging.html">master</a>
                <a class="version is-missing" href="../../../1.1/index.html">1.1</a>
                <a class="version is-current" href="as_configuring-logging.html">1.0</a>
                <a class="version is-missing" href="../../../0.10/index.html">0.10</a>
                <a class="version is-missing" href="../../../0.9/index.html">0.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/1.0/documentation/modules/ROOT/pages/assemblies/logging/as_configuring-logging.adoc">Edit this Page</a></div>
  </div>
<div class="article-grid">
<div class="article-cell1">
<article class="doc">
            <h1 class="page">Configuring logging</h1>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>By default, Debezium connectors write all <code>INFO</code>, <code>WARN</code>, and <code>ERROR</code> messages to the console.
However, you can change this configuration in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#changing-logging-level">Change the logging level</a></p>
</li>
<li>
<p><a href="#adding-mapped-diagnostic-contexts">Add mapped diagnostic contexts</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This section only covers a couple methods you can use to configure Debezium logging with Log4j.
For more information about using Log4j,
search for tutorials to set up and use appenders to send log messages to specific destinations.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changing-logging-level"><a class="anchor" href="#changing-logging-level"></a>Changing the logging level</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default Debezium logging level provides sufficient information to show whether a connector is healthy or not.
However, if a connector is not healthy,
you can change its logging level to troubleshoot the issue.</p>
</div>
<div class="paragraph">
<p>In general, Debezium connectors send their log messages to loggers with names that match the fully-qualified name of the Java class that is generating the log message.
Debezium uses packages to organize code with similar or related functions.
This means that you can control all of the log messages for a specific class or for all of the classes within or under a specific package.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open the <code>log4j.properties</code> file.</p>
</li>
<li>
<p>Configure a logger for the connector.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This example configures loggers for the MySQL connector and the database history implementation used by the connector,
and sets them to log <code>DEBUG</code> level messages:</p>
</div>
<div class="listingblock">
<div class="title">log4j.properties</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-properties hljs" data-lang="properties">...
log4j.logger.io.debezium.connector.mysql=DEBUG, stdout  <i class="conum" data-value="1"></i><b>(1)</b>
log4j.logger.io.debezium.relational.history=DEBUG, stdout  <i class="conum" data-value="2"></i><b>(2)</b>

log4j.additivity.io.debezium.connector.mysql=false  <i class="conum" data-value="3"></i><b>(3)</b>
log4j.additivity.io.debezium.relational.history=false  <i class="conum" data-value="3"></i><b>(3)</b>
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Configures the logger named <code>io.debezium.connector.mysql</code> to send <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, and <code>ERROR</code> messages to the <code>stdout</code> appender.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Configures the logger named <code>io.debezium.relational.history</code> to send <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, and <code>ERROR</code> messages to the <code>stdout</code> appender.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Turns off <em>additivity</em>,
which means that the log messages will not be sent to appenders of parent loggers (this can prevent seeing duplicate log messages when using multiple appenders).</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>If necessary, change the logging level for a specific subset of the classes within the connector.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Increasing the logging level for the entire connector increases the log verbosity,
which can make it difficult to understand what is happening.
In these cases,
you can change the logging level just for the subset of classes that are related to the issue that you are troubleshooting.</p>
</div>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set the connector&#8217;s logging level to either <code>DEBUG</code> or <code>TRACE</code>.</p>
</li>
<li>
<p>Review the connector&#8217;s log messages.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Find the log messages that are related to the issue that you are troubleshooting.
The end of each log message shows the name of the Java class that produced the message.</p>
</div>
</div>
</div>
</li>
<li>
<p>Set the connector&#8217;s logging level back to <code>INFO</code>.</p>
</li>
<li>
<p>Configure a logger for each Java class that you identified.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For example, consider a scenario in which you are unsure why the MySQL connector is skipping some events when it is processing the binlog.
Rather than turn on <code>DEBUG</code> or <code>TRACE</code> logging for the entire connector,
you can keep the connector&#8217;s logging level at <code>INFO</code> and then configure <code>DEBUG</code> or <code>TRACE</code> on just the class that is reading the binlog:</p>
</div>
<div class="listingblock">
<div class="title">log4j.properties</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-properties hljs" data-lang="properties">...
log4j.logger.io.debezium.connector.mysql=INFO, stdout
log4j.logger.io.debezium.connector.mysql.BinlogReader=DEBUG, stdout
log4j.logger.io.debezium.relational.history=INFO, stdout

log4j.additivity.io.debezium.connector.mysql=false
log4j.additivity.io.debezium.relational.history=false
log4j.additivity.io.debezium.connector.mysql.BinlogReader=false
...</code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-mapped-diagnostic-contexts"><a class="anchor" href="#adding-mapped-diagnostic-contexts"></a>Adding mapped diagnostic contexts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most Debezium connectors (and the Kafka Connect workers) use multiple threads to perform different activities.
This can make it difficult to look at a log file and find only those log messages for a particular logical activity.
To make the log messages easier to find,
Debezium provides several <em>mapped diagnostic contexts</em> (MDC) that provide additional information for each thread.</p>
</div>
<div class="paragraph">
<p>Debezium provides the following MDC properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dbz.connectorType</code></dt>
<dd>
<p>A short alias for the type of connector.
For example, <code>MySql</code>, <code>Mongo</code>, <code>Postgres</code>, and so on.
All threads associated with the same <em>type</em> of connector use the same value,
so you can use this to find all log messages produced by a given type of connector.</p>
</dd>
<dt class="hdlist1"><code>dbz.connectorName</code></dt>
<dd>
<p>The name of the connector or database server as defined in the connector&#8217;s configuration.
For example <code>products</code>, <code>serverA</code>, and so on.
All threads associated with a specific <em>connector instance</em> use the same value,
so you can find all of the log messages produced by a specific connector instance.</p>
</dd>
<dt class="hdlist1"><code>dbz.connectorContext</code></dt>
<dd>
<p>A short name for an activity running as a separate thread running within the connector&#8217;s task.
For example, <code>main</code>, <code>binlog</code>, <code>snapshot</code>, and so on.
In some cases, when a connector assigns threads to specific resources (such as a table or collection),
the name of that resource could be used instead.
Each thread associated with a connector would use a distinct value,
so you can find all of the log messages associated with this particular activity.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To enable MDC for a connector,
you configure an appender in the <code>log4j.properties</code> file.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open the <code>log4j.properties</code> file.</p>
</li>
<li>
<p>Configure an appender to use any of the supported Debezium MDC properties.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In this example, the <code>stdout</code> appender is configured to use these MDC properties:</p>
</div>
<div class="listingblock">
<div class="title">log4j.properties</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-properties hljs" data-lang="properties">...
log4j.appender.stdout.layout.ConversionPattern=%d{ISO8601} %-5p  %X{dbz.connectorType}|%X{dbz.connectorName}|%X{dbz.connectorContext}  %m   [%c]%n
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will produce log messages similar to these:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">...
2017-02-07 20:49:37,692 INFO   MySQL|dbserver1|snapshot  Starting snapshot for jdbc:mysql://mysql:3306/?useInformationSchema=true&amp;nullCatalogMeansCurrent=false&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;characterSetResults=UTF-8&amp;zeroDateTimeBehavior=convertToNull with user 'debezium'   [io.debezium.connector.mysql.SnapshotReader]
2017-02-07 20:49:37,696 INFO   MySQL|dbserver1|snapshot  Snapshot is using user 'debezium' with these MySQL grants:   [io.debezium.connector.mysql.SnapshotReader]
2017-02-07 20:49:37,697 INFO   MySQL|dbserver1|snapshot  	GRANT SELECT, RELOAD, SHOW DATABASES, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'debezium'@'%'   [io.debezium.connector.mysql.SnapshotReader]
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each line in the log includes the connector type (for example, <code>MySQL</code>), the name of the connector (for example, <code>dbserver1</code>), and the activity of the thread (for example, <code>snapshot</code>).</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</article>
</div>
<div class="article-cell2">
</div>
</div>

<div id="toc-rightbar"></div>    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2020 Debezium Community</div>
        </div>
    </footer>
</main>
</div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /**
     * This checks if a "#toc" element exists in the DOM and if so:
     *
     *  1. Appends a cloned copy of the #toc node to the #toc-rightbar div.
     *  2. Forces the #toc-rightbar div to be visible.
     *  3. Adds the .toc-right class to the #article-wrapper div to restrict the article's overall width.
     */
    var $toc = $("#toc");
    if ( $toc.length ) {
        $("#toc-rightbar").append($toc.clone());
        $("body .main").addClass("with-toc");
    }

    /**
     * In order to make CSS changes that are backward compatible with old adoc files, this applies a version
     * style to the body tag so we can use it to differentiate between CSS styles per version if needed,
     * such as tfoot rows.
     */
    var $version = $("body .nav-container").data("version");
    var $versionClass = "version-" + $version;
    $versionClass = $versionClass.replace('.','-');
    $("body").addClass($versionClass);

    /** A CSS trick to wrap long-width tables in a div that can be scrolled on smaller screens */
    $("table.tableblock").wrap("<div class='table-scroll-wrapper'></div>");

    $(function() {
        /* apply floating scrollbar to the scroll-wrapper */
        $(".table-scroll-wrapper").floatingScrollbar();
    });

</script>
<script src="../../../../debezium-antora/js/site.js"></script>
<script async src="../../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>