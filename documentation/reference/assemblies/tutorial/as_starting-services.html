<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Starting the services :: Debezium Documentation</title>
    <link rel="canonical" href="https://www.debezium.io/documentation/reference/assemblies/tutorial/as_starting-services.html">
    <meta name="generator" content="Antora 2.3.0-alpha.2">
<link rel="stylesheet" href="../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
<script src="../../../debezium-antora/js/jquery.ba-floatingscrollbar.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://www.jboss.org/projects/about"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Debezium Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/outbox-event-router.html">Outbox Event Router</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../connectors/mysql.html">MySQL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_overview-of-how-the-mysql-connector-works.html">How It Works</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_setup-the-mysql-server.html">Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_deploy-the-mysql-connector.html">Deployment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_connector-common-issues.html">Common Issues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/db2.html">Db2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/cassandra.html">Cassandra</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API and SPI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../development/engine.html">Debezium Engine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../development/converters.html">Custom Converters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/serdes.html">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/outbox.html">Outbox Quarkus Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/cloudevents.html">CloudEvents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/testcontainers.html">Integration Testing with Testcontainers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/embedded.html">Embedding Debezium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../1.1/index.html">1.1</a>
        </li>
        <li class="version">
          <a href="../../1.0/index.html">1.0</a>
        </li>
        <li class="version">
          <a href="../../0.10/index.html">0.10</a>
        </li>
        <li class="version">
          <a href="../../0.9/index.html">0.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Debezium Documentation</a></li>
    <li><a href="as_starting-services.html">Starting the services</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">master</button>
        <!--<button class="version-menu-toggle versions-menu-select" title="Select other versions">Select</button>-->
        <div class="version-menu">
                <a class="version is-current" href="as_starting-services.html">master</a>
                <a class="version" href="../../1.1/assemblies/tutorial/as_starting-services.html">1.1</a>
                <a class="version" href="../../1.0/assemblies/tutorial/as_starting-services.html">1.0</a>
                <a class="version is-missing" href="../../0.10/index.html">0.10</a>
                <a class="version is-missing" href="../../0.9/index.html">0.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/master/documentation/modules/ROOT/pages/assemblies/tutorial/as_starting-services.adoc">Edit this Page</a></div>
  </div>
<div class="article-grid">
<div class="article-cell1">
<article class="doc">
            <h1 class="page">Starting the services</h1>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Using Debezium requires three separate services:
<a href="http://zookeeper.apache.org">ZooKeeper</a>, Kafka, and the Debezium connector service.
In this tutorial,
you will set up a single instance of each service using <a href="http://docker.com">Docker</a> and <a href="https://hub.docker.com/u/debezium/">the Debezium Docker images</a>.</p>
</div>
<div class="paragraph">
<p>To start the services needed for this tutorial, you must:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#starting-zookeeper">Start Zookeeper</a></p>
</li>
<li>
<p><a href="#starting-kafka">Start Kafka</a></p>
</li>
<li>
<p><a href="#starting-mysql-database">Start a MySQL database</a></p>
</li>
<li>
<p><a href="#starting-mysql-command-line-client">Start a MySQL command line client</a></p>
</li>
<li>
<p><a href="#starting-kafka-connect">Start Kafka Connect</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-running-debezium-docker"><a class="anchor" href="#considerations-running-debezium-docker"></a>Considerations for running Debezium with Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial uses <a href="http://docker.com">Docker</a> and the <a href="https://hub.docker.com/u/debezium/">Debezium Docker images</a> to run the ZooKeeper, Kafka, Debezium, and MySQL services.
Running each service in a separate container simplifies the setup so that you can see Debezium in action.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In a production environment,
you would run multiple instances of each service to provide performance, reliability, replication, and fault tolerance.
Typically, you would either deploy these services on a platform like <a href="https://www.openshift.com">OpenShift</a> or <a href="http://kubernetes.io">Kubernetes</a> that manages multiple Docker containers running on multiple hosts and machines,
or you would install on dedicated hardware.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You should be aware of the following considerations for running Debezium with Docker:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The containers for ZooKeeper and Kafka are ephemeral.</p>
<div class="paragraph">
<p>ZooKeeper and Kafka would typically store their data locally inside the containers,
which would require you to mount directories on the host machine as volumes.
That way, when the containers are stopped,
the persisted data remains.
However, this tutorial skips this setup -
when a container is stopped, all persisted data is lost.
This way, cleanup is simple when you complete the tutorial.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For more information about storing persistent data,
see the documentation for the <a href="https://hub.docker.com/r/debezium/">Docker images</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>This tutorial requires you to run each service in a different container.</p>
<div class="paragraph">
<p>To avoid confusion, you will run each container in the foreground in a separate terminal.
This way, all of the output of a container will be displayed in the terminal used to run it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Docker also allows you to run a container in <em>detached</em> mode (with the <code>-d</code> option),
where the container is started and the <code>docker</code> command returns immediately.
However, detached mode containers do not display their output in the terminal.
To see the output,
you would need to use the <code>docker logs --follow --name <em>&lt;container-name&gt;</em></code> command.
For more information, see the Docker documentation.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-zookeeper"><a class="anchor" href="#starting-zookeeper"></a>Starting Zookeeper</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ZooKeeper is the first service you must start.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open a terminal and use it to start ZooKeeper in a container.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This command runs a new container using version 1.1 of the <code>debezium/zookeeper</code> image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name zookeeper -p 2181:2181 -p 2888:2888 -p 3888:3888 debezium/zookeeper:1.1</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-it</code></dt>
<dd>
<p>The container is interactive,
which means the terminal&#8217;s standard input and output are attached to the container.</p>
</dd>
<dt class="hdlist1"><code>--rm</code></dt>
<dd>
<p>The container will be removed when it is stopped.</p>
</dd>
<dt class="hdlist1"><code>--name zookeeper</code></dt>
<dd>
<p>The name of the container.</p>
</dd>
<dt class="hdlist1"><code>-p 2181:2181 -p 2888:2888 -p 3888:3888</code></dt>
<dd>
<p>Maps three of the container&#8217;s ports to the same ports on the Docker host.
This enables other containers (and applications outside of the container) to communicate with ZooKeeper.</p>
</dd>
</dl>
</div>
</div>
</div>
</li>
<li>
<p>Verify that ZooKeeper started and is listening on port <code>2181</code>.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You should see output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">Starting up in standalone mode
ZooKeeper JMX enabled by default
Using config: /zookeeper/conf/zoo.cfg
2017-09-21 07:15:55,417 - INFO  [main:QuorumPeerConfig@134] - Reading configuration from: /zookeeper/conf/zoo.cfg
2017-09-21 07:15:55,419 - INFO  [main:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2017-09-21 07:15:55,419 - INFO  [main:DatadirCleanupManager@79] - autopurge.purgeInterval set to 1
...
port 0.0.0.0/0.0.0.0:2181  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This line indicates that ZooKeeper is ready and listening on port 2181. The terminal will continue to show additional output as ZooKeeper generates it.</td>
</tr>
</table>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-kafka"><a class="anchor" href="#starting-kafka"></a>Starting Kafka</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After starting ZooKeeper, you can start Kafka in a new container.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Debezium 1.1.0.Final has been tested against multiple versions of Kafka Connect.
Please refer to the <a href="https://debezium.io/releases">Debezium Test Matrix</a> to determine compatibility between Debezium and Kafka Connect.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open a new terminal and use it to start Kafka in a container.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This command runs a new container using version 1.1 of the <code>debezium/kafka</code> image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name kafka -p 9092:9092 --link zookeeper:zookeeper debezium/kafka:1.1</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-it</code></dt>
<dd>
<p>The container is interactive,
which means the terminal&#8217;s standard input and output are attached to the container.</p>
</dd>
<dt class="hdlist1"><code>--rm</code></dt>
<dd>
<p>The container will be removed when it is stopped.</p>
</dd>
<dt class="hdlist1"><code>--name kafka</code></dt>
<dd>
<p>The name of the container.</p>
</dd>
<dt class="hdlist1"><code>-p 9092:9092</code></dt>
<dd>
<p>Maps port <code>9092</code> in the container to the same port on the Docker host so that applications outside of the container can communicate with Kafka.</p>
</dd>
<dt class="hdlist1"><code>--link zookeeper:zookeeper</code></dt>
<dd>
<p>Tells the container that it can find ZooKeeper in the <code>zookeeper</code> container,
which is running on the same Docker host.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In this tutorial, you will always connect to Kafka from within a Docker container.
Any of these containers can communicate with the <code>kafka</code> container by linking to it.
If you needed to connect to Kafka from <em>outside</em> of a Docker container,
you would have to set the <code>-e</code> option to advertise the Kafka address through the Docker host
(<code>-e ADVERTISED_HOST_NAME=</code> followed by either the IP address or resolvable host name of the Docker host).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Verify that Kafka started.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You should see output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">...
2017-09-21 07:16:59,085 - INFO  [main-EventThread:ZkClient@713] - zookeeper state changed (SyncConnected)
2017-09-21 07:16:59,218 - INFO  [main:Logging$class@70] - Cluster ID = LPtcBFxzRvOzDSXhc6AamA
...
2017-09-21 07:16:59,649 - INFO  [main:Logging$class@70] - [Kafka Server 1], started  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The Kafka broker has successfully started and is ready for client connections. The terminal will continue to show additional output as Kafka generates it.</td>
</tr>
</table>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-mysql-database"><a class="anchor" href="#starting-mysql-database"></a>Starting a MySQL database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this point, you have started ZooKeeper and Kafka,
but you still need a database server from which Debezium can capture changes.
In this procedure, you will start a MySQL server with an example database.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open a new terminal, and use it to start a new container that runs a MySQL database server preconfigured with an <code>inventory</code> database.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This command runs a new container using version 1.1 of the <code>debezium/example-mysql</code> image, which is <a href="https://github.com/debezium/docker-images/blob/master/examples/mysql/0.1/Dockerfile">based on</a> the <a href="https://hub.docker.com/r/_/mysql/">mysql:5.7</a> image.
It also defines and populates a sample <code>inventory</code> database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=debezium -e MYSQL_USER=mysqluser -e MYSQL_PASSWORD=mysqlpw debezium/example-mysql:1.1</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-it</code></dt>
<dd>
<p>The container is interactive,
which means the terminal&#8217;s standard input and output are attached to the container.</p>
</dd>
<dt class="hdlist1"><code>--rm</code></dt>
<dd>
<p>The container will be removed when it is stopped.</p>
</dd>
<dt class="hdlist1"><code>--name mysql</code></dt>
<dd>
<p>The name of the container.</p>
</dd>
<dt class="hdlist1"><code>-p 3306:3306</code></dt>
<dd>
<p>Maps port <code>3306</code> (the default MySQL port) in the container to the same port on the Docker host so that applications outside of the container can connect to the database server.</p>
</dd>
<dt class="hdlist1"><code>-e MYSQL_ROOT_PASSWORD=debezium -e MYSQL_USER=mysqluser -e MYSQL_PASSWORD=mysqlpw</code></dt>
<dd>
<p>Creates a user and password that has the minimum privileges required by the Debezium MySQL connector.</p>
</dd>
</dl>
</div>
</div>
</div>
</li>
<li>
<p>Verify that the MySQL server starts.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The MySQL server starts and stops a few times as the configuration is modified.
You should see output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">...
017-09-21T07:18:50.824629Z 0 [Note] mysqld: ready for connections.
Version: '5.7.19-log'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server (GPL)</code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-mysql-command-line-client"><a class="anchor" href="#starting-mysql-command-line-client"></a>Starting a MySQL command line client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After starting MySQL, you start a MySQL command line client so that you access the sample <code>inventory</code> database.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open a new terminal, and use it to start the MySQL command line client in a container.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This command runs a new container using the <a href="https://hub.docker.com/r/_/mysql/">mysql:5.7</a> image,
and defines a shell command to run the MySQL command line client with the correct options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name mysqlterm --link mysql --rm mysql:5.7 sh -c 'exec mysql -h"$MYSQL_PORT_3306_TCP_ADDR" -P"$MYSQL_PORT_3306_TCP_PORT" -uroot -p"$MYSQL_ENV_MYSQL_ROOT_PASSWORD"'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-it</code></dt>
<dd>
<p>The container is interactive,
which means the terminal&#8217;s standard input and output are attached to the container.</p>
</dd>
<dt class="hdlist1"><code>--rm</code></dt>
<dd>
<p>The container will be removed when it is stopped.</p>
</dd>
<dt class="hdlist1"><code>--name mysqlterm</code></dt>
<dd>
<p>The name of the container.</p>
</dd>
<dt class="hdlist1"><code>--link mysql</code></dt>
<dd>
<p>Links the container to the <code>mysql</code> container.</p>
</dd>
</dl>
</div>
</div>
</div>
</li>
<li>
<p>Verify that the MySQL command line client started.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You should see output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-mysql hljs" data-lang="mysql">mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.7.17-log MySQL Community Server (GPL)

Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt;</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>At the <code>mysql&gt;</code> command prompt, switch to the inventory database:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-sql hljs" data-lang="sql">mysql&gt; use inventory;</code></pre>
</div>
</div>
</li>
<li>
<p>List the tables in the database:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-sql hljs" data-lang="sql">mysql&gt; show tables;
+---------------------+
| Tables_in_inventory |
+---------------------+
| addresses           |
| customers           |
| geom                |
| orders              |
| products            |
| products_on_hand    |
+---------------------+
6 rows in set (0.00 sec)</code></pre>
</div>
</div>
</li>
<li>
<p>Use the MySQL command line client to explore the database and view the pre-loaded data in the database.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-sql hljs" data-lang="sql">mysql&gt; SELECT * FROM customers;
+------+------------+-----------+-----------------------+
| id   | first_name | last_name | email                 |
+------+------------+-----------+-----------------------+
| 1001 | Sally      | Thomas    | sally.thomas@acme.com |
| 1002 | George     | Bailey    | gbailey@foobar.com    |
| 1003 | Edward     | Walker    | ed@walker.com         |
| 1004 | Anne       | Kretchmar | annek@noanswer.org    |
+------+------------+-----------+-----------------------+
4 rows in set (0.00 sec)</code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-kafka-connect"><a class="anchor" href="#starting-kafka-connect"></a>Starting Kafka Connect</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After starting MySQL and connecting to the <code>inventory</code> database with the MySQL command line client,
you start the Kafka Connect service.
This service exposes a REST API to manage the Debezium MySQL connector.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open a new terminal, and use it to start the Kafka Connect service in a container.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This command runs a new container using the 1.1 version of the <code>debezium/connect</code> image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name connect -p 8083:8083 -e GROUP_ID=1 -e CONFIG_STORAGE_TOPIC=my_connect_configs -e OFFSET_STORAGE_TOPIC=my_connect_offsets -e STATUS_STORAGE_TOPIC=my_connect_statuses --link zookeeper:zookeeper --link kafka:kafka --link mysql:mysql debezium/connect:1.1</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-it</code></dt>
<dd>
<p>The container is interactive,
which means the terminal&#8217;s standard input and output are attached to the container.</p>
</dd>
<dt class="hdlist1"><code>--rm</code></dt>
<dd>
<p>The container will be removed when it is stopped.</p>
</dd>
<dt class="hdlist1"><code>--name connect</code></dt>
<dd>
<p>The name of the container.</p>
</dd>
<dt class="hdlist1"><code>-p 8083:8083</code></dt>
<dd>
<p>Maps port <code>8083</code> in the container to the same port on the Docker host.
This enables applications outside of the container to use Kafka Connect&#8217;s REST API to set up and manage new container instances.</p>
</dd>
<dt class="hdlist1"><code>-e CONFIG_STORAGE_TOPIC=my_connect_configs -e OFFSET_STORAGE_TOPIC=my_connect_offsets -e STATUS_STORAGE_TOPIC=my_connect_statuses</code></dt>
<dd>
<p>Sets environment variables required by the Debezium image.</p>
</dd>
<dt class="hdlist1"><code>--link zookeeper:zookeeper --link kafka:kafka --link mysql:mysql</code></dt>
<dd>
<p>Links the container to the containers that are running ZooKeeper, Kafka, and the MySQL server.</p>
</dd>
</dl>
</div>
</div>
</div>
</li>
<li>
<p>Verify that Kafka Connect started and is ready to accept connections.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You should see output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">...
2020-02-06 15:48:33,939 INFO   ||  Kafka version: 2.4.0   [org.apache.kafka.common.utils.AppInfoParser]
...
2020-02-06 15:48:34,485 INFO   ||  [Worker clientId=connect-1, groupId=1] Starting connectors and tasks using config offset -1   [org.apache.kafka.connect.runtime.distributed.DistributedHerder]
2020-02-06 15:48:34,485 INFO   ||  [Worker clientId=connect-1, groupId=1] Finished starting connectors and tasks   [org.apache.kafka.connect.runtime.distributed.DistributedHerder]</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Use the Kafka Connect REST API to check the status of the Kafka Connect service.</p>
<div class="paragraph">
<p>Kafka Connect exposes a REST API to manage Debezium connectors.
To communicate with the Kafka Connect service,
you can use the <code>curl</code> command to send API requests to port 8083 of the Docker host (which you mapped to port 8083 in the <code>connect</code> container when you started Kafka Connect).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These commands use <code>localhost</code>.
If you are using a non-native Docker platform (such as Docker Toolbox),
replace <code>localhost</code> with the IP address of your Docker host.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open a new terminal and check the status of the Kafka Connect service:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>$ curl -H "Accept:application/json" localhost:8083/
{"version":"2.4.0","commit":"cb8625948210849f"}  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The response shows that Kafka Connect version 2.4.0 is running.</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Check the list of connectors registered with Kafka Connect:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>$ curl -H "Accept:application/json" localhost:8083/connectors/
[]  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>No connectors are currently registered with Kafka Connect.</td>
</tr>
</table>
</div>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</article>
</div>
<div class="article-cell2">
</div>
</div>

<div id="toc-rightbar"></div>    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2020 Debezium Community</div>
        </div>
    </footer>
</main>
</div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /**
     * This checks if a "#toc" element exists in the DOM and if so:
     *
     *  1. Appends a cloned copy of the #toc node to the #toc-rightbar div.
     *  2. Forces the #toc-rightbar div to be visible.
     *  3. Adds the .toc-right class to the #article-wrapper div to restrict the article's overall width.
     */
    var $toc = $("#toc");
    if ( $toc.length ) {
        $("#toc-rightbar").append($toc.clone());
        $("body .main").addClass("with-toc");
    }

    /**
     * In order to make CSS changes that are backward compatible with old adoc files, this applies a version
     * style to the body tag so we can use it to differentiate between CSS styles per version if needed,
     * such as tfoot rows.
     */
    var $version = $("body .nav-container").data("version");
    var $versionClass = "version-" + $version;
    $versionClass = $versionClass.replace('.','-');
    $("body").addClass($versionClass);

    /** A CSS trick to wrap long-width tables in a div that can be scrolled on smaller screens */
    $("table.tableblock").wrap("<div class='table-scroll-wrapper'></div>");

    $(function() {
        /* apply floating scrollbar to the scroll-wrapper */
        $(".table-scroll-wrapper").floatingScrollbar();
    });

</script>
<script src="../../../debezium-antora/js/site.js"></script>
<script async src="../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>