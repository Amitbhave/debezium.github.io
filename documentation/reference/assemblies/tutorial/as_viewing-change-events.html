<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Viewing change events :: Debezium Documentation</title>
    <link rel="canonical" href="https://www.debezium.io/documentation/reference/assemblies/tutorial/as_viewing-change-events.html">
    <meta name="generator" content="Antora 2.3.0-alpha.2">
<link rel="stylesheet" href="../../../debezium-antora/css/site.css">
<link rel="stylesheet" href="../../../debezium-antora/css/debezium-antora.css">
<link rel="stylesheet" href="../../../debezium-antora/css/highlightjs-dark.css">
<link rel="stylesheet" href="https://static.jboss.org/css/rhbar.css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
<script src="../../../debezium-antora/js/jquery.ba-floatingscrollbar.js"></script>
</head>
<body class="article">
<header class="header">
  <div id="rhbar">
      <a class="jbdevlogo" href="https://www.jboss.org/projects/about"></a>
      <a class="rhlogo" href="https://www.redhat.com"></a>
  </div>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          <img src="/images/color_white_debezium_type_600px.svg" style="height: 32px; margin-right: 14px;"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/documentation/faq">FAQ</a>
        <a class="navbar-item" href="/documentation">DOCUMENTATION</a>
        <a class="navbar-item" href="/releases">RELEASES</a>
        <a class="navbar-item" href="/community">COMMUNITY</a>
        <a class="navbar-item" href="/blog">BLOG</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="reference" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Debezium Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorial.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../install.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../postgres-plugins.html">PostgreSQL Decoding Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../features.html">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/avro.html">Avro Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/topic-routing.html">Topic Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/event-flattening.html">New Record State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/mongodb-event-flattening.html">MongoDB New Document State Extraction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/outbox-event-router.html">Outbox Event Router</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../connectors/mysql.html">MySQL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_overview-of-how-the-mysql-connector-works.html">How It Works</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_setup-the-mysql-server.html">Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_deploy-the-mysql-connector.html">Deployment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cdc-mysql-connector/as_connector-common-issues.html">Common Issues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/mongodb.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/postgresql.html">PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/sqlserver.html">SQL Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/db2.html">Db2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/cassandra.html">Cassandra</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API and SPI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../development/engine.html">Debezium Engine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../development/converters.html">Custom Converters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/serdes.html">Change Event SerDes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/outbox.html">Outbox Quarkus Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/cloudevents.html">CloudEvents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/testcontainers.html">Integration Testing with Testcontainers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/openshift.html">Running on Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operations/embedded.html">Embedding Debezium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Debezium Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Debezium Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../1.1/index.html">1.1</a>
        </li>
        <li class="version">
          <a href="../../1.0/index.html">1.0</a>
        </li>
        <li class="version">
          <a href="../../0.10/index.html">0.10</a>
        </li>
        <li class="version">
          <a href="../../0.9/index.html">0.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main" class="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Debezium Documentation</a></li>
    <li><a href="as_viewing-change-events.html">Viewing change events</a></li>
  </ul>
</nav>
    <div class="page-versions-container">
    Version:
    <div class="page-versions">
        <button class="version-menu-toggle versions-menu-current" title="Show other versions of page">master</button>
        <!--<button class="version-menu-toggle versions-menu-select" title="Select other versions">Select</button>-->
        <div class="version-menu">
                <a class="version is-current" href="as_viewing-change-events.html">master</a>
                <a class="version is-missing" href="../../1.1/index.html">1.1</a>
                <a class="version is-missing" href="../../1.0/index.html">1.0</a>
                <a class="version is-missing" href="../../0.10/index.html">0.10</a>
                <a class="version is-missing" href="../../0.9/index.html">0.9</a>
        </div>
        |
    </div>
    </div>
  <div class="edit-this-page"><a href="https://github.com/debezium/debezium/edit/master/documentation/modules/ROOT/pages/assemblies/tutorial/as_viewing-change-events.adoc">Edit this Page</a></div>
  </div>
<div class="article-grid">
<div class="article-cell1">
<article class="doc">
            <h1 class="page">Viewing change events</h1>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>After deploying the Debezium MySQL connector,
it starts monitoring the <code>inventory</code> database for data change events.</p>
</div>
<div class="paragraph">
<p>When you watched the connector start up,
you saw that events were written to the following topics with the <code>dbserver1</code> prefix (the name of the connector):</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dbserver1</code></dt>
<dd>
<p>The <a href="../../connectors/mysql.html#schema-change-topic" class="page">schema change topic</a> to which all of the DDL statements are written.</p>
</dd>
<dt class="hdlist1"><code>dbserver1.inventory.products</code></dt>
<dd>
<p>Captures change events for the <code>products</code> table in the <code>inventory</code> database.</p>
</dd>
<dt class="hdlist1"><code>dbserver1.inventory.products_on_hand</code></dt>
<dd>
<p>Captures change events for the <code>products_on_hand</code> table in the <code>inventory</code> database.</p>
</dd>
<dt class="hdlist1"><code>dbserver1.inventory.customers</code></dt>
<dd>
<p>Captures change events for the <code>customers</code> table in the <code>inventory</code> database.</p>
</dd>
<dt class="hdlist1"><code>dbserver1.inventory.orders</code></dt>
<dd>
<p>Captures change events for the <code>orders</code> table in the <code>inventory</code> database.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For this tutorial, you will explore the <code>dbserver1.inventory.customers</code> topic.
In this topic, you will see different types of change events to see how the connector captured them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#viewing-create-event">Viewing a <em>create</em> event</a></p>
</li>
<li>
<p><a href="#updating-database-viewing-update-event">Updating the database and viewing the <em>update</em> event</a></p>
</li>
<li>
<p><a href="#deleting-record-database-viewing-delete-event">Deleting a record in the database and viewing the <em>delete</em> event</a></p>
</li>
<li>
<p><a href="#restarting-kafka-connect-service">Restarting Kafka Connect and changing the database</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="viewing-create-event"><a class="anchor" href="#viewing-create-event"></a>Viewing a <em>create</em> event</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By viewing the <code>dbserver1.inventory.customers</code> topic,
you can see how the MySQL connector captured <em>create</em> events in the <code>inventory</code> database.
In this case, the <em>create</em> events capture new customers being added to the database.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open a new terminal, and use it to start the <code>watch-topic</code> utility to watch the <code>dbserver1.inventory.customers</code> topic from the beginning of the topic.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>watch-topic</code> utility is very simple and limited in functionality.
It is not intended to be used by an application to consume events.
In that scenario, you would instead use Kafka consumers and the applicable consumer libraries that offer full functionality and flexibility.</p>
</div>
<div class="paragraph">
<p>This command runs the <code>watch-topic</code> utility in a new container using the 1.0 version of the <code>debezium/kafka</code> image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name watcher --link zookeeper:zookeeper --link kafka:kafka debezium/kafka:1.0 watch-topic -a -k dbserver1.inventory.customers</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-a</code></dt>
<dd>
<p>Watches all events since the topic was created.
Without this option, <code>watch-topic</code> would only show the events recorded after you start watching.</p>
</dd>
<dt class="hdlist1"><code>-k</code></dt>
<dd>
<p>Specifies that the output should include the event&#8217;s key.
In this case, this contains the row&#8217;s primary key.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The <code>watch-topic</code> utility returns the event records from the <code>customers</code> table.
There are four events, one for each row in the table.
Each event is formatted in JSON, because that is how you configured the Kafka Connect service.
There are two JSON documents for each event:
one for the key, and one for the value.</p>
</div>
<div class="paragraph">
<p>You should see output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">Using ZOOKEEPER_CONNECT=172.17.0.2:2181
Using KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://172.17.0.7:9092
Using KAFKA_BROKER=172.17.0.3:9092
Contents of topic dbserver1.inventory.customers:
{"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"}],"optional":false,"name":"dbserver1.inventory.customers.Key"},"payload":{"id":1001}}
...</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This utility keeps watching the topic, so any new events will automatically appear as long as the utility is running.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>For the last event, review the details of the <em>key</em>.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Here are the details of the <em>key</em> of the last event (formatted for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "schema":{
    "type":"struct",
      "fields":[
        {
          "type":"int32",
          "optional":false,
          "field":"id"
        }
      ],
    "optional":false,
    "name":"dbserver1.inventory.customers.Key"
  },
  "payload":{
    "id":1004
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The event has two parts: a <code>schema</code> and a <code>payload</code>.
The <code>schema</code> contains a Kafka Connect schema describing what is in the payload.
In this case, the payload is a <code>struct</code> named <code>dbserver1.inventory.customers.Key</code> that is not optional and has one required field (<code>id</code> of type <code>int32</code>).</p>
</div>
<div class="paragraph">
<p>The <code>payload</code> has a single <code>id</code> field, with a value of <code>1004</code>.</p>
</div>
<div class="paragraph">
<p>By reviewing the <em>key</em> of the event,
you can see that this event applies to the row in the <code>inventory.customers</code> table whose <code>id</code> primary key column had a value of <code>1004</code>.</p>
</div>
</div>
</div>
</li>
<li>
<p>Review the details of the same event&#8217;s <em>value</em>.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The event&#8217;s <em>value</em> shows that the row was created,
and describes what it contains (in this case, the <code>id</code>, <code>first_name</code>, <code>last_name</code>, and <code>email</code> of the inserted row).</p>
</div>
<div class="paragraph">
<p>Here are the details of the <em>value</em> of the last event (formatted for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "fields": [
      {
        "type": "struct",
        "fields": [
          {
            "type": "int32",
            "optional": false,
            "field": "id"
          },
          {
            "type": "string",
            "optional": false,
            "field": "first_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "last_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "email"
          }
        ],
        "optional": true,
        "name": "dbserver1.inventory.customers.Value",
        "field": "before"
      },
      {
        "type": "struct",
        "fields": [
          {
            "type": "int32",
            "optional": false,
            "field": "id"
          },
          {
            "type": "string",
            "optional": false,
            "field": "first_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "last_name"
          },
          {
            "type": "string",
            "optional": false,
            "field": "email"
          }
        ],
        "optional": true,
        "name": "dbserver1.inventory.customers.Value",
        "field": "after"
      },
      {
        "type": "struct",
        "fields": [
          {
            "type": "string",
            "optional": true,
            "field": "version"
          },
          {
            "type": "string",
            "optional": false,
            "field": "name"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "server_id"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "ts_sec"
          },
          {
            "type": "string",
            "optional": true,
            "field": "gtid"
          },
          {
            "type": "string",
            "optional": false,
            "field": "file"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "pos"
          },
          {
            "type": "int32",
            "optional": false,
            "field": "row"
          },
          {
            "type": "boolean",
            "optional": true,
            "field": "snapshot"
          },
          {
            "type": "int64",
            "optional": true,
            "field": "thread"
          },
          {
            "type": "string",
            "optional": true,
            "field": "db"
          },
          {
            "type": "string",
            "optional": true,
            "field": "table"
          }
        ],
        "optional": false,
        "name": "io.debezium.connector.mysql.Source",
        "field": "source"
      },
      {
        "type": "string",
        "optional": false,
        "field": "op"
      },
      {
        "type": "int64",
        "optional": true,
        "field": "ts_ms"
      }
    ],
    "optional": false,
    "name": "dbserver1.inventory.customers.Envelope",
    "version": 1
  },
  "payload": {
    "before": null,
    "after": {
      "id": 1004,
      "first_name": "Anne",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "source": {
      "version": "1.1.0.Beta2",
      "name": "dbserver1",
      "server_id": 0,
      "ts_sec": 0,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 154,
      "row": 0,
      "snapshot": true,
      "thread": null,
      "db": "inventory",
      "table": "customers"
    },
    "op": "c",
    "ts_ms": 1486500577691
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This portion of the event is much longer,
but like the event&#8217;s <em>key</em>, it also has a <code>schema</code> and a <code>payload</code>.
The <code>schema</code> contains a Kafka Connect schema named <code>dbserver1.inventory.customers.Envelope</code> (version 1) that can contain five fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>op</code></dt>
<dd>
<p>A required field that contains a string value describing the type of operation.
Values for the MySQL connector are <code>c</code> for create (or insert), <code>u</code> for update, <code>d</code> for delete, and <code>r</code> for read (in the case of a non-initial snapshot).</p>
</dd>
<dt class="hdlist1"><code>before</code></dt>
<dd>
<p>An optional field that, if present, contains the state of the row <em>before</em> the event occurred.
The structure will be described by the <code>dbserver1.inventory.customers.Value</code> Kafka Connect schema,
which the <code>dbserver1</code> connector uses for all rows in the <code>inventory.customers</code> table.</p>
</dd>
<dt class="hdlist1"><code>after</code></dt>
<dd>
<p>An optional field that, if present, contains the state of the row <em>after</em> the event occurred.
The structure is described by the same <code>dbserver1.inventory.customers.Value</code> Kafka Connect schema used in <code>before</code>.</p>
</dd>
<dt class="hdlist1"><code>source</code></dt>
<dd>
<p>A required field that contains a structure describing the source metadata for the event,
which in the case of MySQL, contains several fields:
the connector name, the name of the <code>binlog</code> file where the event was recorded, the position in that <code>binlog</code> file where the event appeared, the row within the event (if there is more than one), the names of the affected database and table, the MySQL thread ID that made the change, whether this event was part of a snapshot, and, if available, the MySQL server ID, and the timestamp in seconds.</p>
</dd>
<dt class="hdlist1"><code>ts_ms</code></dt>
<dd>
<p>An optional field that, if present, contains the time (using the system clock in the JVM running the Kafka Connect task) at which the connector processed the event.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The JSON representations of the events are much longer than the rows they describe.
This is because, with every event key and value, Kafka Connect ships the <em>schema</em> that describes the <em>payload</em>.
Over time, this structure may change.
However, having the schemas for the key and the value in the event itself makes it much easier for consuming applications to understand the messages, especially as they evolve over time.</p>
</div>
<div class="paragraph">
<p>The Debezium MySQL connector constructs these schemas based upon the structure of the database tables.
If you use DDL statements to alter the table definitions in the MySQL databases,
the connector reads these DDL statements and updates its Kafka Connect schemas.
This is the only way that each event is structured exactly like the table from where it originated at the time the event occurred.
However, the Kafka topic containing all of the events for a single table might have events that correspond to each state of the table definition.</p>
</div>
<div class="paragraph">
<p>The JSON converter includes the key and value schemas in every message,
so it does produce very verbose events.
Alternatively, you can use the <a href="http://docs.confluent.io/3.1.2/schema-registry/docs/index.html">Avro converter</a>, which results in far smaller event messages.
This is because it transforms each Kafka Connect schema into an Avro schema and stores the Avro schemas in a separate Schema Registry service.
Thus, when the Avro converter serializes an event message,
it places only a unique identifier for the schema along with an Avro-encoded binary representation of the value.
As a result, the serialized messages that are transferred over the wire and stored in Kafka are far smaller than what you have seen here.
In fact, the Avro Converter is able to use Avro schema evolution techniques to maintain the history of each schema in the Schema Registry.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Compare the event&#8217;s <em>key</em> and <em>value</em> schemas to the state of the <code>inventory</code> database.
In the terminal that is running the MySQL command line client, run the following statement:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-sql hljs" data-lang="sql">mysql&gt; SELECT * FROM customers;
+------+------------+-----------+-----------------------+
| id   | first_name | last_name | email                 |
+------+------------+-----------+-----------------------+
| 1001 | Sally      | Thomas    | sally.thomas@acme.com |
| 1002 | George     | Bailey    | gbailey@foobar.com    |
| 1003 | Edward     | Walker    | ed@walker.com         |
| 1004 | Anne       | Kretchmar | annek@noanswer.org    |
+------+------------+-----------+-----------------------+
4 rows in set (0.00 sec)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This shows that the event records you reviewed match the records in the database.</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="updating-database-viewing-update-event"><a class="anchor" href="#updating-database-viewing-update-event"></a>Updating the database and viewing the <em>update</em> event</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have seen how the Debezium MySQL connector captured the <em>create</em> events in the <code>inventory</code> database,
you will now change one of the records and see how the connector captures it.</p>
</div>
<div class="paragraph">
<p>By completing this procedure, you will learn how to find details about what changed in a database commit,
and how you can compare change events to determine when the change occurred in relation to other changes.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the terminal that is running the MySQL command line client, run the following statement:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-sql hljs" data-lang="sql">mysql&gt; UPDATE customers SET first_name='Anne Marie' WHERE id=1004;
Query OK, 1 row affected (0.05 sec)
Rows matched: 1  Changed: 1  Warnings: 0</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>View the updated <code>customers</code> table:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-sql hljs" data-lang="sql">mysql&gt; SELECT * FROM customers;
+------+------------+-----------+-----------------------+
| id   | first_name | last_name | email                 |
+------+------------+-----------+-----------------------+
| 1001 | Sally      | Thomas    | sally.thomas@acme.com |
| 1002 | George     | Bailey    | gbailey@foobar.com    |
| 1003 | Edward     | Walker    | ed@walker.com         |
| 1004 | Anne Marie | Kretchmar | annek@noanswer.org    |
+------+------------+-----------+-----------------------+
4 rows in set (0.00 sec)</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Switch to the terminal running <code>watch-topic</code> to see a <em>new</em> fifth event.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>By changing a record in the <code>customers</code> table, the Debezium MySQL connector generated a new event.
You should see two new JSON documents: one for the event&#8217;s <em>key</em>,
and one for the new event&#8217;s <em>value</em>.</p>
</div>
<div class="paragraph">
<p>Here are the details of the <em>key</em> for the <em>update</em> event (formatted for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">  {
    "schema": {
      "type": "struct",
      "name": "dbserver1.inventory.customers.Key"
      "optional": false,
      "fields": [
        {
          "field": "id",
          "type": "int32",
          "optional": false
        }
      ]
    },
    "payload": {
      "id": 1004
    }
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <em>key</em> is the same as the <em>key</em> for the previous events.</p>
</div>
<div class="paragraph">
<p>Here is that new event&#8217;s <em>value</em>.
There are no changes in the <code>schema</code> section, so only the <code>payload</code> section is shown (formatted for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "schema": {...},
  "payload": {
    "before": {  <i class="conum" data-value="1"></i><b>(1)</b>
      "id": 1004,
      "first_name": "Anne",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "after": {  <i class="conum" data-value="2"></i><b>(2)</b>
      "id": 1004,
      "first_name": "Anne Marie",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "source": {  <i class="conum" data-value="3"></i><b>(3)</b>
      "name": "1.1.0.Beta2",
      "name": "dbserver1",
      "server_id": 223344,
      "ts_sec": 1486501486,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 364,
      "row": 0,
      "snapshot": null,
      "thread": 3,
      "db": "inventory",
      "table": "customers"
    },
    "op": "u",  <i class="conum" data-value="4"></i><b>(4)</b>
    "ts_ms": 1486501486308  <i class="conum" data-value="5"></i><b>(5)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>before</code> field now has the state of the row with the values before the database commit.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>after</code> field now has the updated state of the row,
and the <code>first_name</code> value is now <code>Anne Marie</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>source</code> field structure has many of the same values as before,
except that the <code>ts_sec</code> and <code>pos</code> fields have changed
(the <code>file</code> might have changed in other circumstances).</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>op</code> field value is now <code>u</code>,
signifying that this row changed because of an update.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <code>ts_ms</code> field shows the time stamp for when Debezium processed this event.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By viewing the <code>payload</code> section, you can learn several important things about the <em>update</em> event:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>By comparing the <code>before</code> and <code>after</code> structures, you can determine what actually changed in the affected row because of the commit.</p>
</li>
<li>
<p>By reviewing the <code>source</code> structure, you can find information about MySQL&#8217;s record of the change (providing traceability).</p>
</li>
<li>
<p>By comparing the <code>payload</code> section of an event to other events in the same topic (or a different topic), you can determine whether the event occurred before, after, or as part of the same MySQL commit as another event.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deleting-record-database-viewing-delete-event"><a class="anchor" href="#deleting-record-database-viewing-delete-event"></a>Deleting a record in the database and viewing the <em>delete</em> event</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have seen how the Debezium MySQL connector captured the <em>create</em> and <em>update</em> events in the <code>inventory</code> database,
you will now delete one of the records and see how the connector captures it.</p>
</div>
<div class="paragraph">
<p>By completing this procedure, you will learn how to find details about <em>delete</em> events,
and how Kafka uses <em>log compaction</em> to reduce the number of <em>delete</em> events while still enabling consumers to get all of the events.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the terminal that is running the MySQL command line client, run the following statement:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-sql hljs" data-lang="sql">mysql&gt; DELETE FROM customers WHERE id=1004;
Query OK, 1 row affected (0.00 sec)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the above command fails with a foreign key constraint violation,
then you must remove the reference of the customer address from the <em>addresses</em> table using the following statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-sql hljs" data-lang="sql">mysql&gt; DELETE FROM addresses WHERE customer_id=1004;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Switch to the terminal running <code>watch-topic</code> to see <em>two</em> new events.</p>
<div class="paragraph">
<p>By deleting a row in the <code>customers</code> table, the Debezium MySQL connector generated two new events.</p>
</div>
</li>
<li>
<p>Review the <em>key</em> and <em>value</em> for the first new event.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Here are the details of the <em>key</em> for the first new event (formatted for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "dbserver1.inventory.customers.Key"
    "optional": false,
    "fields": [
      {
        "field": "id",
        "type": "int32",
        "optional": false
      }
    ]
  },
  "payload": {
    "id": 1004
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <em>key</em> is the same as the <em>key</em> in the previous two events you looked at.</p>
</div>
<div class="paragraph">
<p>Here is the <em>value</em> of the first new event (formatted for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "schema": {...},
  "payload": {
    "before": {  <i class="conum" data-value="1"></i><b>(1)</b>
      "id": 1004,
      "first_name": "Anne Marie",
      "last_name": "Kretchmar",
      "email": "annek@noanswer.org"
    },
    "after": null,  <i class="conum" data-value="2"></i><b>(2)</b>
    "source": {  <i class="conum" data-value="3"></i><b>(3)</b>
      "name": "1.1.0.Beta2",
      "name": "dbserver1",
      "server_id": 223344,
      "ts_sec": 1486501558,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 725,
      "row": 0,
      "snapshot": null,
      "thread": 3,
      "db": "inventory",
      "table": "customers"
    },
    "op": "d",  <i class="conum" data-value="4"></i><b>(4)</b>
    "ts_ms": 1486501558315  <i class="conum" data-value="5"></i><b>(5)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>before</code> field now has the state of the row that was deleted with the database commit.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>after</code> field is <code>null</code> because the row no longer exists.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>source</code> field structure has many of the same values as before,
except the <code>ts_sec</code> and <code>pos</code> fields have changed
(the <code>file</code> might have changed in other circumstances).</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>op</code> field value is now <code>d</code>,
signifying that this row was deleted.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <code>ts_ms</code> field shows the time stamp for when Debezium processes this event.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Thus, this event provides a consumer with the information that it needs to process the removal of the row.
The old values are also provided, because some consumers might require them to properly handle the removal.</p>
</div>
</div>
</div>
</li>
<li>
<p>Review the <em>key</em> and <em>value</em> for the second new event.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Here is the <em>key</em> for the second new event (formatted for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">  {
    "schema": {
      "type": "struct",
      "name": "dbserver1.inventory.customers.Key"
      "optional": false,
      "fields": [
        {
          "field": "id",
          "type": "int32",
          "optional": false
        }
      ]
    },
    "payload": {
      "id": 1004
    }
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once again, this <em>key</em> is exactly the same key as in the previous three events you looked at.</p>
</div>
<div class="paragraph">
<p>Here is the <em>value</em> of that same event (formatted for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "schema": null,
  "payload": null
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If Kafka is set up to be <em>log compacted</em>,
it will remove older messages from the topic if there is at least one message later in the topic with same key.
This last event is called a <em>tombstone</em> event,
because it has a key and an empty value.
This means that Kafka will remove all prior messages with the same key.
Even though the prior messages will be removed,
the tombstone event means that consumers can still read the topic from the beginning and not miss any events.</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="restarting-kafka-connect-service"><a class="anchor" href="#restarting-kafka-connect-service"></a>Restarting the Kafka Connect service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have seen how the Debezium MySQL connector captures <em>create</em>, <em>update</em>, and <em>delete</em> events,
you will now see how it can capture change events even when it is not running.</p>
</div>
<div class="paragraph">
<p>The Kafka Connect service automatically manages tasks for its registered connectors.
Therefore, if it goes offline, when it restarts, it will start any non-running tasks.
This means that even if Debezium is not running,
it can still report changes in a database.</p>
</div>
<div class="paragraph">
<p>In this procedure, you will stop Kafka Connect,
change some data in the database,
and then restart Kafka Connect to see the change events.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Open a new terminal and use it to stop the <code>connect</code> container that is running the Kafka Connect service:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker stop connect</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>connect</code> container is stopped, and the Kafka Connect service gracefully shuts down.</p>
</div>
<div class="paragraph">
<p>Because you ran the container with the <code>--rm</code> option, Docker removes the container once it stops.</p>
</div>
</div>
</div>
</li>
<li>
<p>While the service is down, switch to the terminal for the MySQL command line client, and add a few records:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-sql hljs" data-lang="sql">mysql&gt; INSERT INTO customers VALUES (default, "Sarah", "Thompson", "kitt@acme.com");
mysql&gt; INSERT INTO customers VALUES (default, "Kenneth", "Anderson", "kander@acme.com");</code></pre>
</div>
</div>
<div class="paragraph">
<p>The records are added to the database.
However, because Kafka Connect is not running,
<code>watch-topic</code> does not record any updates.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In a production system, you would have enough brokers to handle the producers and consumers,
and to maintain a minimum number of in-sync replicas for each topic.
Therefore, if enough brokers failed such that there were no longer the minimum number of ISRs,
Kafka would become unavailable.
In this scenario, producers (like the Debezium connectors) and consumers will wait for the Kafka cluster or network to recover.
This means that, temporarily, your consumers might not see any change events as data is changed in the databases.
This is because no change events are being produced.
As soon as the Kafka cluster is restarted or the network recovers,
Debezium will resume producing change events, and your consumers will resume consuming events where they left off.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Open a new terminal, and use it to restart the Kafka Connect service in a container.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This command starts Kafka Connect using the same options you used when you initially started it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">$ docker run -it --rm --name connect -p 8083:8083 -e GROUP_ID=1 -e CONFIG_STORAGE_TOPIC=my_connect_configs -e OFFSET_STORAGE_TOPIC=my_connect_offsets -e STATUS_STORAGE_TOPIC=my_connect_statuses --link zookeeper:zookeeper --link kafka:kafka --link mysql:mysql debezium/connect:1.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Kafka Connect service starts, connects to Kafka, reads the previous service&#8217;s configuration, and starts the registered connectors that will resume where they last left off.</p>
</div>
<div class="paragraph">
<p>Here are the last few lines from this restarted service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-shell hljs" data-lang="shell">...
2017-09-21 07:38:48,385 INFO   MySQL|dbserver1|task  Kafka version : 0.11.0.0   [org.apache.kafka.common.utils.AppInfoParser]
2017-09-21 07:38:48,386 INFO   MySQL|dbserver1|task  Kafka commitId : cb8625948210849f   [org.apache.kafka.common.utils.AppInfoParser]
2017-09-21 07:38:48,390 INFO   MySQL|dbserver1|task  Discovered coordinator 172.17.0.4:9092 (id: 2147483646 rack: null) for group inventory-connector-dbhistory.   [org.apache.kafka.clients.consumer.internals.AbstractCoordinator]
2017-09-21 07:38:48,390 INFO   MySQL|dbserver1|task  Revoking previously assigned partitions [] for group inventory-connector-dbhistory   [org.apache.kafka.clients.consumer.internals.ConsumerCoordinator]
2017-09-21 07:38:48,391 INFO   MySQL|dbserver1|task  (Re-)joining group inventory-connector-dbhistory   [org.apache.kafka.clients.consumer.internals.AbstractCoordinator]
2017-09-21 07:38:48,402 INFO   MySQL|dbserver1|task  Successfully joined group inventory-connector-dbhistory with generation 1   [org.apache.kafka.clients.consumer.internals.AbstractCoordinator]
2017-09-21 07:38:48,403 INFO   MySQL|dbserver1|task  Setting newly assigned partitions [dbhistory.inventory-0] for group inventory-connector-dbhistory   [org.apache.kafka.clients.consumer.internals.ConsumerCoordinator]
2017-09-21 07:38:48,888 INFO   MySQL|dbserver1|task  Step 0: Get all known binlogs from MySQL   [io.debezium.connector.mysql.MySqlConnectorTask]
2017-09-21 07:38:48,903 INFO   MySQL|dbserver1|task  MySQL has the binlog file 'mysql-bin.000003' required by the connector   [io.debezium.connector.mysql.MySqlConnectorTask]
Sep 21, 2017 7:38:49 AM com.github.shyiko.mysql.binlog.BinaryLogClient connect
INFO: Connected to mysql:3306 at mysql-bin.000003/154 (sid:184054, cid:10)
2017-09-21 07:38:49,045 INFO   MySQL|dbserver1|binlog  Connected to MySQL binlog at mysql:3306, starting at binlog file 'mysql-bin.000003', pos=154, skipping 0 events plus 0 rows   [io.debezium.connector.mysql.BinlogReader]
2017-09-21 07:38:49,046 INFO   ||  Source task WorkerSourceTask{id=inventory-connector-0} finished initialization and start   [org.apache.kafka.connect.runtime.WorkerSourceTask]</code></pre>
</div>
</div>
<div class="paragraph">
<p>These lines show that the service found the offsets previously recorded by the last task before it was shut down,
connected to the MySQL database,
started reading the <code>binlog</code> from that position,
and generated events from any changes in the MySQL database since that point in time.</p>
</div>
</div>
</div>
</li>
<li>
<p>Switch to the terminal running <code>watch-topic</code> to see events for the two new records you created when Kafka Connect was offline:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"}],"optional":false,"name":"dbserver1.inventory.customers.Key"},"payload":{"id":1005}}	{"schema":{"type":"struct","fields":[{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"},{"type":"string","optional":false,"field":"first_name"},{"type":"string","optional":false,"field":"last_name"},{"type":"string","optional":false,"field":"email"}],"optional":true,"name":"dbserver1.inventory.customers.Value","field":"before"},{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"},{"type":"string","optional":false,"field":"first_name"},{"type":"string","optional":false,"field":"last_name"},{"type":"string","optional":false,"field":"email"}],"optional":true,"name":"dbserver1.inventory.customers.Value","field":"after"},{"type":"struct","fields":[{"type":"string","optional":true,"field":"version"},{"type":"string","optional":false,"field":"name"},{"type":"int64","optional":false,"field":"server_id"},{"type":"int64","optional":false,"field":"ts_sec"},{"type":"string","optional":true,"field":"gtid"},{"type":"string","optional":false,"field":"file"},{"type":"int64","optional":false,"field":"pos"},{"type":"int32","optional":false,"field":"row"},{"type":"boolean","optional":true,"field":"snapshot"},{"type":"int64","optional":true,"field":"thread"},{"type":"string","optional":true,"field":"db"},{"type":"string","optional":true,"field":"table"}],"optional":false,"name":"io.debezium.connector.mysql.Source","field":"source"},{"type":"string","optional":false,"field":"op"},{"type":"int64","optional":true,"field":"ts_ms"}],"optional":false,"name":"dbserver1.inventory.customers.Envelope","version":1},"payload":{"before":null,"after":{"id":1005,"first_name":"Sarah","last_name":"Thompson","email":"kitt@acme.com"},"source":{"version":"1.1.0.Beta2","name":"dbserver1","server_id":223344,"ts_sec":1490635153,"gtid":null,"file":"mysql-bin.000003","pos":1046,"row":0,"snapshot":null,"thread":3,"db":"inventory","table":"customers"},"op":"c","ts_ms":1490635181455}}
{"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"}],"optional":false,"name":"dbserver1.inventory.customers.Key"},"payload":{"id":1006}}	{"schema":{"type":"struct","fields":[{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"},{"type":"string","optional":false,"field":"first_name"},{"type":"string","optional":false,"field":"last_name"},{"type":"string","optional":false,"field":"email"}],"optional":true,"name":"dbserver1.inventory.customers.Value","field":"before"},{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"},{"type":"string","optional":false,"field":"first_name"},{"type":"string","optional":false,"field":"last_name"},{"type":"string","optional":false,"field":"email"}],"optional":true,"name":"dbserver1.inventory.customers.Value","field":"after"},{"type":"struct","fields":[{"type":"string","optional":true,"field":"version"},{"type":"string","optional":false,"field":"name"},{"type":"int64","optional":false,"field":"server_id"},{"type":"int64","optional":false,"field":"ts_sec"},{"type":"string","optional":true,"field":"gtid"},{"type":"string","optional":false,"field":"file"},{"type":"int64","optional":false,"field":"pos"},{"type":"int32","optional":false,"field":"row"},{"type":"boolean","optional":true,"field":"snapshot"},{"type":"int64","optional":true,"field":"thread"},{"type":"string","optional":true,"field":"db"},{"type":"string","optional":true,"field":"table"}],"optional":false,"name":"io.debezium.connector.mysql.Source","field":"source"},{"type":"string","optional":false,"field":"op"},{"type":"int64","optional":true,"field":"ts_ms"}],"optional":false,"name":"dbserver1.inventory.customers.Envelope","version":1},"payload":{"before":null,"after":{"id":1006,"first_name":"Kenneth","last_name":"Anderson","email":"kander@acme.com"},"source":{"version":"1.1.0.Beta2","name":"dbserver1","server_id":223344,"ts_sec":1490635160,"gtid":null,"file":"mysql-bin.000003","pos":1356,"row":0,"snapshot":null,"thread":3,"db":"inventory","table":"customers"},"op":"c","ts_ms":1490635181456}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These events are <em>create</em> events that are similar to what you saw previously.
As you see, Debezium still reports all of the changes in a database even when it is not running
(as long as it is restarted before the MySQL database purges from its <code>binlog</code> the commits that were missed).</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</article>
</div>
<div class="article-cell2">
</div>
</div>

<div id="toc-rightbar"></div>    <footer class="footer">
        <div class="wrapper">
            <div class="copyright">Copyright &copy; 2020 Debezium Community</div>
        </div>
    </footer>
</main>
</div>
<script>
    /* Make sure TOC carets are expanded if sub-elements exist */
    $("#toc").each(function(i,v) {
      $(this).closest('article').addClass('with-toc');
    });

    $("#toc ul.sectlevel1 > li").each(function(i,v) {
      $(this).has("ul").addClass("expanded");
    });

    $(function() {
        /* Expands all the documentation submenus */
        $(".nav-list > .nav-item:not(.is-active) .nav-item-toggle").click();
    });

    /**
     * This checks if a "#toc" element exists in the DOM and if so:
     *
     *  1. Appends a cloned copy of the #toc node to the #toc-rightbar div.
     *  2. Forces the #toc-rightbar div to be visible.
     *  3. Adds the .toc-right class to the #article-wrapper div to restrict the article's overall width.
     */
    var $toc = $("#toc");
    if ( $toc.length ) {
        $("#toc-rightbar").append($toc.clone());
        $("body .main").addClass("with-toc");
    }

    /**
     * In order to make CSS changes that are backward compatible with old adoc files, this applies a version
     * style to the body tag so we can use it to differentiate between CSS styles per version if needed,
     * such as tfoot rows.
     */
    var $version = $("body .nav-container").data("version");
    var $versionClass = "version-" + $version;
    $versionClass = $versionClass.replace('.','-');
    $("body").addClass($versionClass);

    /** A CSS trick to wrap long-width tables in a div that can be scrolled on smaller screens */
    $("table.tableblock").wrap("<div class='table-scroll-wrapper'></div>");

    $(function() {
        /* apply floating scrollbar to the scroll-wrapper */
        $(".table-scroll-wrapper").floatingScrollbar();
    });

</script>
<script src="../../../debezium-antora/js/site.js"></script>
<script async src="../../../debezium-antora/js/vendor/highlight.js"></script>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-10656779-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76464546-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
  ga('require', 'linkid', 'linkid.js');
</script>
</body>
</html>