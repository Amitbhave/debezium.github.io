<!DOCTYPE html> <html lang="en"> <head> <title>Debezium Blog</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="" name="description"> <meta content="" name="author"> <link href="https://static.jboss.org/theme/css/bootstrap-community/3.2.0.2/bootstrap-community.min.css" media="screen" rel="stylesheet"> <!--[if lt IE 9]><script src="https://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--> <link href="https://static.jboss.org/example/images/favicon.ico" rel="shortcut icon"> <link href="https://static.jboss.org/example/images/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="https://static.jboss.org/example/images/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="https://static.jboss.org/example/images/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="https://static.jboss.org/example/images/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="/stylesheets/debezium.css" rel="stylesheet" type="text/css"> <style>
      @media (min-width: 980px) {
        .banner { background-image: url(https://static.jboss.org/example/images/debezium-banner-1180px.png); height: 110px;  }
      }
      @media (max-width: 979px) {
        .banner { background-image: url(https://static.jboss.org/example/images/debezium-logo.png); background-repeat:no-repeat; background-position: center bottom; height: 60px; }
      }
      @media (max-width: 650px) {
        .banner { width: 100%; margin: 0px auto; }
      }
      @media (max-width: 450px) {
        .banner { height: 90px; }
      }
    </style> <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css" rel="stylesheet"> <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> <script src="https://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <style>
      /* adjusting the vertical spacing for when a stickynav is engaged */
      .breadcrumb-fixed > .active {
        color: #8c8f91;
      }
      .breadcrumb-fixed {
        margin: 70px 0 10px;
        padding: 8px 15px;
        margin-bottom: 20px;
        list-style: none;
        background-color: #f5f5f5;
        border-radius: 4px;
      }
      
      .breadcrumb-fixed > li {
        display: inline-block;
      }
    </style> </head> <body> <div id="rhbar"> <a class="jbdevlogo" href="https://www.jboss.org/projects/about"></a> <a class="rhlogo" href="https://www.redhat.com/"></a> </div> <div id=""> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div class="container" id="content"> <div class="navbar navbar-inverse navbar-fix"> <div class="container-fluid"> <div class="navbar-header"> <button class="navbar-toggle collapsed" data-target="#navbar-1" data-toggle="collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> Debezium </a> </div> <div class="collapse navbar-collapse" id="navbar-1"> <ul class="nav navbar-nav pull-right"> <li class=""><a href="/docs/faq/">FAQ</a></li> <li class=""><a href="/docs/">DOCS</a></li> <li class=""><a href="/community/">COMMUNITY</a></li> <li class="active"><a href="/blog/">BLOG</a></li> </ul> </div> </div> </div> <div id="equalHeightsLayout"> <div class="row post-text-padding row-no-expand"> <div class="hidden-xs col-sm-3 no-right-padding" id="leftdocnav"> <div class="panel-docnav"> <div class="panel-heading"> <h3 class="panel-title"> Latest posts </h3> </div> <div class="panel-body"> <ul class="list-group"> <li class="list-group-item"> <a href="/blog/2019/02/25/debezium-0-9-2-final-released/" rel="tooltip" title="Click to go to post">Debezium 0.9.2.Final Released</a> </li> <li class="list-group-item"> <a href="/blog/2019/02/19/reliable-microservices-data-exchange-with-the-outbox-pattern/" rel="tooltip" title="Click to go to post">Reliable Microservices Data Exchange With the Outbox Pattern</a> </li> <li class="list-group-item"> <a href="/blog/2019/02/13/debezium-webinar-at-devnation-live/" rel="tooltip" title="Click to go to post">Debezium at DevNation Live</a> </li> <li class="list-group-item"> <a href="/blog/2019/02/13/debezium-0-9-1-final-released/" rel="tooltip" title="Click to go to post">Debezium 0.9.1.Final Released</a> </li> <li class="list-group-item"> <a href="/blog/2019/02/05/debezium-0-9-0-final-released/" rel="tooltip" title="Click to go to post">Debezium 0.9.0.Final Released</a> </li> <li class="list-group-item"> <a href="/blog/2019/01/28/debezium-0-9-0-cr1-released/" rel="tooltip" title="Click to go to post">Debezium 0.9.0.CR1 Released</a> </li> <li class="list-group-item"> <a href="/blog/2018/12/19/debezium-0-9-0-beta2-released/" rel="tooltip" title="Click to go to post">Debezium 0.9.0.Beta2 Released</a> </li> <li class="list-group-item"> <a href="/blog/2018/12/05/automating-cache-invalidation-with-change-data-capture/" rel="tooltip" title="Click to go to post">Automating Cache Invalidation With Change Data Capture</a> </li> </ul> </div> </div> </div> <div class="col-xs-12 col-sm-9" id="maincol"> <div class="text-right"> <h3> Subscribe <a class="rss" href="/blog.atom"> <i class="icon-rss"></i> </a> </h3> </div> <hr> <div class="post"> <h1 class="title"> <a href="/blog/2016/06/22/Debezium-0-2-2-Released/">Debezium 0.2.2 Released</a> </h1> <div class="byline"> <p> <em> June 22, 2016 by Randall Hauch </em> <em> under&nbsp; </em> <a class="label label-info" href="/blog/tags/releases/">releases</a> <a class="label label-info" href="/blog/tags/mysql/">mysql</a> <a class="label label-info" href="/blog/tags/docker/">docker</a> </p> </div> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>I&#8217;m happy to announce that <strong>Debezium 0.2.2 is now available</strong>. This release fixes several bugs in the MySQL connector that can produce change events with incorrect <code>source</code> metadata, and that eliminates the possibility a poorly-timed connector crash causing the connector to only process some of the rows in a multi-row MySQL event. See our <a href="/docs/releases/#release-0-2-2">release notes</a> for details of these changes and for upgrading recommendations.</p> </div> <div class="paragraph"> <p>Also, thanks to a community member for <a href="https://issues.jboss.org/projects/DBZ/issues/DBZ-80">reporting</a> that Debezium 0.2.x can only be used with Kafka Connect 0.9.0.1. Debezium 0.2.x cannot be used with Kafka Connect 0.10.0.0 because of its <a href="https://issues.apache.org/jira/browse/KAFKA-3006">backward incompatible changes to the consumer API</a>. Our next release of Debezium will support Kafka 0.10.x.</p> </div> <div class="paragraph"> <p>We&#8217;ve also updated the <a href="https://hub.docker.com/r/debezium/">Debezium Docker images</a> (with label <code>0.2</code> and <code>latest</code>) used in our <a href="/docs/tutorial/">tutorial</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="about_debezium"><a class="anchor" href="#about_debezium"></a>About Debezium</h2> <div class="sectionbody"> <div class="paragraph"> <p>Debezium is an open source distributed platform that turns your existing databases into event streams, so applications can see and respond almost instantly to each committed row-level change in the databases. Debezium is built on top of <a href="http://kafka.apache.org/">Kafka</a> and provides <a href="http://kafka.apache.org/documentation.html#connect">Kafka Connect</a> compatible connectors that monitor specific database management systems. Debezium records the history of data changes in Kafka logs, so your application can be stopped and restarted at any time and can easily consume all of the events it missed while it was not running, ensuring that all events are processed correctly and completely. Debezium is <a href="/license/">open source</a> under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="get_involved"><a class="anchor" href="#get_involved"></a>Get involved</h2> <div class="sectionbody"> <div class="paragraph"> <p>We hope you find Debezium interesting and useful, and want to give it a try. Follow us on Twitter <a href="https://twitter.com/debezium">@debezium</a>, <a href="https://gitter.im/debezium/user">chat with us on Gitter</a>, or join our <a href="https://groups.google.com/forum/#!forum/debezium">mailing list</a> to talk with the community. All of the code is open source <a href="https://github.com/debezium/">on GitHub</a>, so build the code locally and help us improve the MySQL connector and add more connectors. If you find problems or have ideas how we can improve Debezium, please let us know or <a href="https://issues.jboss.org/projects/DBZ/issues/">log an issue</a>. And stay tuned, because we&#8217;re hoping to add a MongoDB connector in our next release.</p> </div> <div class="paragraph"> <p>Thanks to Chris, Christian, Konstantin, James, and Bhupinder for their help with the release, issues, discussions, contributions, and questions!</p> </div> </div> </div> </div> <hr> <div class="post"> <h1 class="title"> <a href="/blog/2016/06/10/Debezium-0/">Debezium 0.2.1 Released</a> </h1> <div class="byline"> <p> <em> June 10, 2016 by Randall Hauch </em> <em> under&nbsp; </em> <a class="label label-info" href="/blog/tags/releases/">releases</a> <a class="label label-info" href="/blog/tags/mysql/">mysql</a> <a class="label label-info" href="/blog/tags/docker/">docker</a> </p> </div> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>I&#8217;m happy to announce that <strong>Debezium 0.2.1 is now available</strong>. The <a href="/docs/connectors/mysql/">MySQL connector</a> has been significantly improved and is now able to monitor and produce change events for <a href="/docs/connectors/mysql/#ha-mysql-clusters#enabling-gtids">HA MySQL clusters</a> using <a href="/docs/connectors/mysql/">GTIDs</a>, perform a <a href="/docs/connectors/mysql/#snapshots">consistent snapshot</a> when starting up the first time, and has a completely redesigned <a href="/docs/connectors/mysql/#events">event message structure</a> that provides a ton more information with every event. Our <a href="/docs/releases/">change log</a> has all the details about bugs, enhancements, new features, and backward compatibility notices. We&#8217;ve also updated our <a href="/docs/tutorial/">tutorial</a>.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>What happened to 0.2.0? Well, we released it to Maven Central before we&#8217;d noticed a <a href="https://issues.jboss.org/browse/DBZ-71">few</a> <a href="https://issues.jboss.org/browse/DBZ-72">problems</a> that we thought it best to fix right away. Thus 0.2.1 was born.</p> </div> </td> </tr> </table> </div> </div> </div> <div class="sect1"> <h2 id="installing_the_mysql_connector"><a class="anchor" href="#installing_the_mysql_connector"></a>Installing the MySQL connector</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you&#8217;ve already installed <a href="https://zookeeper.apache.org">Zookeeper</a>, <a href="http://kafka.apache.org/">Kafka</a>, and <a href="http://kafka.apache.org/documentation.html#connect">Kafka Connect</a>, then using Debezium&#8217;s MySQL connector is easy. Simply download the <a href="https://repo1.maven.org/maven2/io/debezium/debezium-connector-mysql/0.2.1/debezium-connector-mysql-0.2.1-plugin.tar.gz">connector&#8217;s plugin archive</a>, extract the JARs into your Kafka Connect environment, and add the directory with the JARs to <a href="http://docs.confluent.io/3.0.0/connect/userguide.html#installing-connector-plugins">Kafka Connect&#8217;s classpath</a>. Restart your Kafka Connect process to pick up the new JARs.</p> </div> <div class="paragraph"> <p>If immutable containers are your thing, then check out <a href="https://hub.docker.com/r/debezium/">Debezium&#8217;s Docker images</a> for Zookeeper, Kafka, and Kafka Connect with the MySQL connector already pre-installed and ready to go. Our <a href="/docs/tutorial/">tutorial</a> even walks you through using these images, and this is a great way to learn what Debezium is all about. You can even <a href="/blog/2016/05/31/Debezium-on-Kubernetes/">run Debezium on Kubernetes and OpenShift</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="using_the_mysql_connector"><a class="anchor" href="#using_the_mysql_connector"></a>Using the MySQL connector</h2> <div class="sectionbody"> <div class="paragraph"> <p>To use the connector to produce change events for a particular MySQL server or cluster, simply create a <a href="/docs/connectors/mysql/#configuration">configuration file for the MySQL Connector</a> and use the <a href="http://docs.confluent.io/3.0.0/connect/userguide.html#rest-interface">Kafka Connect REST API</a> to add that connector to your Kafka Connect cluster. When the connector starts, it will grab a consistent snapshot of the databases in your MySQL server and start reading the MySQL binlog, producing events for every inserted, updated, and deleted row. The connector can optionally produce events with the DDL statements that were applied, and you can even choose to produce events for a subset of the databases and tables. Optionally ignore, mask, or truncate columns that are sensitive, too large, or not needed. See the <a href="/docs/connectors/mysql/">MySQL connector&#8217;s documentation</a> for all the details.</p> </div> </div> </div> <div class="sect1"> <h2 id="using_the_libraries"><a class="anchor" href="#using_the_libraries"></a>Using the libraries</h2> <div class="sectionbody"> <div class="paragraph"> <p>Although Debezium is really intended to be used as turnkey services, all of Debezium&#8217;s JARs and other artifacts are available in <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.debezium%22">Maven Central</a>. You might want to use our <a href="/blog/2016/04/15/parsing-ddl/">MySQL DDL parser</a> from our MySQL connector library to parse those DDL statments in your consumers.</p> </div> <div class="paragraph"> <p>We do provide a small library so applications can <a href="/docs/embedded/">embed any Kafka Connect connector</a> and consume data change events read directly from the source system. This provides a much lighter weight system (since Zookeeper, Kafka, and Kafka Connect services are not needed), but as a consequence is not as fault tolerant or reliable since the application must manage and maintain all state normally kept inside Kafka&#8217;s distributed and replicated logs. It&#8217;s perfect for use in tests, and with careful consideration it may be useful in some applications.</p> </div> </div> </div> <div class="sect1"> <h2 id="about_debezium"><a class="anchor" href="#about_debezium"></a>About Debezium</h2> <div class="sectionbody"> <div class="paragraph"> <p>Debezium is an open source distributed platform that turns your existing databases into event streams, so applications can see and respond almost instantly to each committed row-level change in the databases. Debezium is built on top of <a href="http://kafka.apache.org/">Kafka</a> and provides <a href="http://kafka.apache.org/documentation.html#connect">Kafka Connect</a> compatible connectors that monitor specific database management systems. Debezium records the history of data changes in Kafka logs, so your application can be stopped and restarted at any time and can easily consume all of the events it missed while it was not running, ensuring that all events are processed correctly and completely. Debezium is <a href="/license/">open source</a> under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="get_involved"><a class="anchor" href="#get_involved"></a>Get involved</h2> <div class="sectionbody"> <div class="paragraph"> <p>We hope you find Debezium interesting and useful, and want to give it a try. Follow us on Twitter <a href="https://twitter.com/debezium">@debezium</a>, <a href="https://gitter.im/debezium/user">chat with us on Gitter</a>, or join our <a href="https://groups.google.com/forum/#!forum/debezium">mailing list</a> to talk with the community. All of the code is open source <a href="https://github.com/debezium/">on GitHub</a>, so build the code locally and help us improve the MySQL connector and add more connectors. If you find problems or have ideas how we can improve Debezium, please let us know or <a href="https://issues.jboss.org/projects/DBZ/issues/">log an issue</a>. And stay tuned, because we&#8217;re hoping to add a MongoDB connector in our next release.</p> </div> <div class="paragraph"> <p>Thanks to Emmanuel, Chris, Christian, Konstantin, David, Akshath, James, Ewen, Cheng, and Paul for their help with the release, discussions, design assistance, contributions, and questions!</p> </div> </div> </div> </div> <hr> <div class="post"> <h1 class="title"> <a href="/blog/2016/05/31/Debezium-on-Kubernetes/">Debezium on Kubernetes</a> </h1> <div class="byline"> <p> <em> May 31, 2016 by Christian Posta </em> <em> under&nbsp; </em> <a class="label label-info" href="/blog/tags/mysql/">mysql</a> <a class="label label-info" href="/blog/tags/sql/">sql</a> <a class="label label-info" href="/blog/tags/kubernetes/">kubernetes</a> <a class="label label-info" href="/blog/tags/docker/">docker</a> <a class="label label-info" href="/blog/tags/kafka/">kafka</a> </p> </div> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Our <a href="http://debezium.io/docs/tutorial/">Debezium Tutorial</a> walks you step by step through using Debezium by installing, starting, and linking together all of the Docker containers running on a single host machine. Of course, you can use things like Docker Compose or your own scripts to make this easier, although that would just automating running all the containers on a single machine. What you really want is to run the containers on a cluster of machines. In this blog, we&#8217;ll run Debezium using a container cluster manager from Red Hat and Google called <a href="http://kubernetes.io">Kubernetes</a>.</p> </div> <div class="paragraph"> <p><a href="http://kubernetes.io">Kubernetes</a> is a container (Docker/Rocket/Hyper.sh) cluster management tool. Like many other popular cluster management and compute resource scheduling platforms, Kubernetes' roots are in Google, who is no stranger to running containers at scale. They start, stop, and cluster <a href="https://cloudplatform.googleblog.com/2015/01/in-coming-weeks-we-will-be-publishing.html">2 billion containers per week</a> and they contributed a lot of the Linux kernel underpinnings that make containers possible. <a href="http://research.google.com/pubs/pub43438.html">One of their famous papers</a> talks about an internal cluster manager named Borg. With Kubernetes, Google got tired of everyone implementing their papers in Java so they decided to implement this one themselves :)</p> </div> <div class="paragraph"> <p>Kubernetes is written in Go-lang and is quickly becoming the de-facto API for scheduling, managing, and clustering containers at scale. This blog isn&#8217;t intended to be a primer on Kubernetes, so we recommend heading over to the <a href="http://kubernetes.io/docs/getting-started-guides/">Getting Started</a> docs to learn more about Kubernetes.</p> </div> </div> </div> <div class="sect1"> <h2 id="getting_started"><a class="anchor" href="#getting_started"></a>Getting started</h2> <div class="sectionbody"> <div class="paragraph"> <p>To get started, we need to have access to a Kubernetes cluster. Getting one started is pretty easy: just follow the <a href="http://kubernetes.io/docs/getting-started-guides/">getting started</a> guides. A favorite of ours is <a href="https://blog.openshift.com/one-vagrant-image-openshift-origin-v3/">OpenShift&#8217;s all in one VM</a> or the <a href="http://developers.redhat.com/products/cdk/overview/">Red Hat Container Development Kit</a> which provide a hardened, production-ready distribution of Kubernetes. Once you&#8217;ve installed it and logged in, you should be able to run <code>kubectl get pod</code> to get a list of Kubernetes pods you may have running. You don&#8217;t need anything running else inside Kubernetes to get started.</p> </div> <div class="paragraph"> <p>To get and build the Kubernetes manifest files (yaml descriptors), go clone the <a href="https://github.com/debezium/debezium-kubernetes">Debezium Kubernetes</a> repo and run the following command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ mvn clean&#x000A;$ mvn install</code></pre> </div> </div> <div class="paragraph"> <p>This project uses the awesome <a href="http://fabric8.io/guide/mavenPlugin.html">Fabric8 Maven plugin</a> to automatically generate the Kubernetes manifest files. Here&#8217;s an example of what gets generated in <code>$PROJECT_ROOT/zk-standalone/target/classes/kubernetes.yml</code></p> </div> <div class="listingblock"> <div class="content"> <pre class="nowrap">apiVersion: "v1"&#x000A;items:&#x000A;- apiVersion: "v1"&#x000A;  kind: "Service"&#x000A;  metadata:&#x000A;    annotations: {}&#x000A;    labels:&#x000A;      project: "zookeeper"&#x000A;      provider: "debezium"&#x000A;      version: "0.1-SNAPSHOT"&#x000A;      group: "io.debezium"&#x000A;    name: "zookeeper"&#x000A;  spec:&#x000A;    deprecatedPublicIPs: []&#x000A;    externalIPs: []&#x000A;    ports:&#x000A;    - port: 2181&#x000A;      protocol: "TCP"&#x000A;      targetPort: 2181&#x000A;    selector:&#x000A;      project: "zookeeper"&#x000A;      provider: "debezium"&#x000A;      group: "io.debezium"&#x000A;- apiVersion: "v1"&#x000A;  kind: "ReplicationController"&#x000A;  metadata:&#x000A;    annotations:&#x000A;      fabric8.io/git-branch: "master"&#x000A;      fabric8.io/git-commit: "004e222462749fbaf12c3ee33edca9b077ee9003"&#x000A;    labels:&#x000A;      project: "zookeeper"&#x000A;      provider: "debezium"&#x000A;      version: "0.1-SNAPSHOT"&#x000A;      group: "io.debezium"&#x000A;    name: "zk-standalone"&#x000A;  spec:&#x000A;    replicas: 1&#x000A;    selector:&#x000A;      project: "zookeeper"&#x000A;      provider: "debezium"&#x000A;      version: "0.1-SNAPSHOT"&#x000A;      group: "io.debezium"&#x000A;    template:&#x000A;      metadata:&#x000A;        annotations: {}&#x000A;        labels:&#x000A;          project: "zookeeper"&#x000A;          provider: "debezium"&#x000A;          version: "0.1-SNAPSHOT"&#x000A;          group: "io.debezium"&#x000A;      spec:&#x000A;        containers:&#x000A;        - args: []&#x000A;          command: []&#x000A;          env:&#x000A;          - name: "KUBERNETES_NAMESPACE"&#x000A;            valueFrom:&#x000A;              fieldRef:&#x000A;                fieldPath: "metadata.namespace"&#x000A;          image: "docker.io/debezium/zookeeper:0.1"&#x000A;          imagePullPolicy: "IfNotPresent"&#x000A;          name: "zk-standalone"&#x000A;          ports:&#x000A;          - containerPort: 3888&#x000A;            name: "election"&#x000A;          - containerPort: 2888&#x000A;            name: "peer"&#x000A;          - containerPort: 2181&#x000A;            name: "client"&#x000A;          securityContext: {}&#x000A;          volumeMounts: []&#x000A;        imagePullSecrets: []&#x000A;        nodeSelector: {}&#x000A;        volumes: []&#x000A;kind: "List"</pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="starting_zookeeper_and_kafka_on_kubernetes"><a class="anchor" href="#starting_zookeeper_and_kafka_on_kubernetes"></a>Starting Zookeeper and Kafka on Kubernetes</h2> <div class="sectionbody"> <div class="paragraph"> <p>To start <a href="http://zookeeper.apache.org">Apache Zookeeper</a> or <a href="http://kafka.apache.org">Apache Kafka</a> inside Kubernetes you have two options. If you have the <code>kubectl</code> command line (or the <code>oc</code> tool from the OpenShift client distros) on your machine you can apply any of the newly generated Kubernetes manifest files like this:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl create -f &lt;path_to_file&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Or you can use the Fabric8 Maven plugin and its <code>fabric8:apply</code> goal to apply the manifest files. Note for either of these two options to work, you must be currently logged into your Kubernetes cluster. (Also, OpenShift&#8217;s <code>oc login &lt;url&gt;</code> makes this super easy, or see <a href="http://blog.christianposta.com/kubernetes/logging-into-a-kubernetes-cluster-with-kubectl/">Logging into a Kubernetes Cluster with kubectl</a> for more information.)</p> </div> <div class="paragraph"> <p>First, let&#8217;s deploy Zookeeper to our Kubernetes cluster. We need to be in <code>$PROJECT_ROOT/zk-standalone</code> directory, and then we&#8217;ll apply our Kubernetes configuration. First, let&#8217;s see how to do this with the <code>kubectl</code> command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ cd zk-standalone&#x000A;$ kubectl create -f target/classes/kubernetes.yml&#x000A;&#x000A;service "zookeeper" created&#x000A;replicationcontroller "zk-standalone" created</code></pre> </div> </div> <div class="paragraph"> <p>You can do the same thing with Maven and the fabric8 maven plugin:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ cd zk-standalone&#x000A;$ mvn fabric8:apply&#x000A;&#x000A;Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=1512m; support was removed in 8.0&#x000A;[INFO] Scanning for projects...&#x000A;[INFO]&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] Building zk-standalone 0.1-SNAPSHOT&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO]&#x000A;[INFO] --- fabric8-maven-plugin:2.2.115:apply (default-cli) @ zk-standalone ---&#x000A;[INFO] Using kubernetes at: https://172.28.128.4:8443/ in namespace ticket&#x000A;[INFO] Kubernetes JSON: /Users/ceposta/dev/idea-workspace/dbz/debezium-kubernetes/zk-standalone/target/classes/kubernetes.json&#x000A;[INFO] OpenShift platform detected&#x000A;[INFO] Using namespace: ticket&#x000A;[INFO] Looking at repo with directory /Users/ceposta/dev/idea-workspace/dbz/debezium-kubernetes/.git&#x000A;[INFO] Creating a Service from kubernetes.json namespace ticket name zookeeper&#x000A;[INFO] Created Service: zk-standalone/target/fabric8/applyJson/ticket/service-zookeeper.json&#x000A;[INFO] Creating a ReplicationController from kubernetes.json namespace ticket name zk-standalone&#x000A;[INFO] Created ReplicationController: zk-standalone/target/fabric8/applyJson/ticket/replicationcontroller-zk-standalone.json&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] BUILD SUCCESS&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] Total time: 2.661 s&#x000A;[INFO] Finished at: 2016-05-19T15:59:26-07:00&#x000A;[INFO] Final Memory: 26M/260M&#x000A;[INFO] ------------------------------------------------------------------------</code></pre> </div> </div> <div class="paragraph"> <p>Zookeeper is deployed, so let&#8217;s continue with deploying Kafka. Navigate to <code>$PROJECT_ROOT/kafka</code>, and then apply the Kafka deployment configuration:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ cd ../kafka&#x000A;$ kubectl create -f target/classes/kubernetes.yml&#x000A;&#x000A;service "kafka" created&#x000A;replicationcontroller "kafka" created</code></pre> </div> </div> <div class="paragraph"> <p>Or with fabric8 maven plugin:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ cd ../kafka&#x000A;$ mvn fabric8:apply&#x000A;&#x000A;Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=1512m; support was removed in 8.0&#x000A;[INFO] Scanning for projects...&#x000A;[INFO]&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] Building kafka 0.1-SNAPSHOT&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO]&#x000A;[INFO] --- fabric8-maven-plugin:2.2.115:apply (default-cli) @ kafka ---&#x000A;[INFO] Using kubernetes at: https://172.28.128.4:8443/ in namespace ticket&#x000A;[INFO] Kubernetes JSON: /Users/ceposta/dev/idea-workspace/dbz/debezium-kubernetes/kafka/target/classes/kubernetes.json&#x000A;[INFO] OpenShift platform detected&#x000A;[INFO] Using namespace: ticket&#x000A;[INFO] Looking at repo with directory /Users/ceposta/dev/idea-workspace/dbz/debezium-kubernetes/.git&#x000A;[INFO] Creating a Service from kubernetes.json namespace ticket name kafka&#x000A;[INFO] Created Service: kafka/target/fabric8/applyJson/ticket/service-kafka.json&#x000A;[INFO] Creating a ReplicationController from kubernetes.json namespace ticket name kafka&#x000A;[INFO] Created ReplicationController: kafka/target/fabric8/applyJson/ticket/replicationcontroller-kafka.json&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] BUILD SUCCESS&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] Total time: 2.563 s&#x000A;[INFO] Finished at: 2016-05-19T16:03:25-07:00&#x000A;[INFO] Final Memory: 26M/259M&#x000A;[INFO] ------------------------------------------------------------------------</code></pre> </div> </div> <div class="paragraph"> <p>Use the <code>kubectl get pod</code> command to see what is running:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl get pod&#x000A;&#x000A;NAME                  READY     STATUS    RESTARTS   AGE&#x000A;kafka-mqmxt           1/1       Running   0          46s&#x000A;zk-standalone-4mo02   1/1       Running   0          4m</code></pre> </div> </div> <div class="paragraph"> <p>Did you notice that we didn&#8217;t manually "link" the containers as we started them? Kubernetes has a cluster service discovery feature called <a href="http://kubernetes.io/docs/user-guide/services/">Kubernetes Services</a> that load-balances against and lets us use internal DNS (or cluster IPs) to discover pods. For example, in the <code>kubernetes.yml</code> deployment configuration for Kafka, you&#8217;ll see the following:</p> </div> <div class="listingblock"> <div class="content"> <pre class="nowrap">    ...&#x000A;    containers:&#x000A;    - args: []&#x000A;      command: []&#x000A;      env:&#x000A;      - name: "KAFKA_ADVERTISED_PORT"&#x000A;        value: "9092"&#x000A;      - name: "KAFKA_ADVERTISED_HOST_NAME"&#x000A;        value: "kafka"&#x000A;      - name: "KAFKA_ZOOKEEPER_CONNECT"&#x000A;        value: "zookeeper:2181"&#x000A;      - name: "KAFKA_PORT"&#x000A;        value: "9092"&#x000A;      - name: "KUBERNETES_NAMESPACE"&#x000A;        valueFrom:&#x000A;          fieldRef:&#x000A;            fieldPath: "metadata.namespace"&#x000A;      image: "docker.io/debezium/kafka:0.1"&#x000A;      imagePullPolicy: "IfNotPresent"&#x000A;      name: "kafka"&#x000A;    ...</pre> </div> </div> <div class="paragraph"> <p>We&#8217;re specifying values for the <code>KAFKA_ZOOKEEPER_CONNECT</code> environment variable used by the Docker image, and thus enabling Kafka to discover Zookeeper pods wherever they are running. Although we could have used any hostname, to keep things simple we use just <code>zookeeper</code> for the DNS name. So, if you were to log in to one of the pods and try to reach the host named <code>zookeeper</code>, Kubernetes would transparently resolve that request to one of the Zookeeper pods (if there are multiple). Slick! This discovery mechanism is used for the rest of the components, too. (Note, this cluster IP that the DNS resolves to <strong>never</strong> changes for the life of the Kubernetes Service regardless of how many Pods exist for a given service. This means you can rely on this service discovery without all of the DNS caching issues you may otherwise run into.)</p> </div> <div class="paragraph"> <p>The next step is to create a <code>schema-changes</code> topic that Debezium&#8217;s MySQL connector will use. Let&#8217;s use the Kafka tools to create this:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ KAFKA_POD_NAME=$(kubectl get pod | grep -i running | grep kafka | awk '{ print $1 }')&#x000A;&#x000A;$ kubectl exec $KAFKA_POD_NAME --  /kafka/bin/kafka-topics.sh --create --zookeeper zookeeper:2181 --replication-factor 1 --partitions 1 --topic schema-changes.inventory</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="start_up_a_mysql_database_on_kubernetes"><a class="anchor" href="#start_up_a_mysql_database_on_kubernetes"></a>Start up a MySQL Database on Kubernetes</h2> <div class="sectionbody"> <div class="paragraph"> <p>Starting the MySQL database follows the same instructions as installing Zookeeper or Kafka. We will navigate to the <code>$PROJECT_ROOT/mysql56</code> directory, and we&#8217;ll use the <a href="https://github.com/openshift/mysql">MySQL 5.6 OpenShift Docker image</a> so that it runs on both vanilla Kubernetes and OpenShift v3.x. Here&#8217;s the <code>kubectl</code> command to start up our MySQL instance:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ cd ../mysql56&#x000A;$ kubectl create -f target/classes/kubernetes.yml&#x000A;&#x000A;service "mysql" created&#x000A;replicationcontroller "mysql56" created</code></pre> </div> </div> <div class="paragraph"> <p>Or the equivalent Maven command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ cd mysql56&#x000A;$ mvn fabric8:apply</code></pre> </div> </div> <div class="paragraph"> <p>Now, when we run <code>kubectl get pod</code> we should see our MySQL database running, too:</p> </div> <div class="listingblock"> <div class="content"> <pre class="nowrap">NAME                  READY     STATUS    RESTARTS   AGE&#x000A;kafka-mqmxt           1/1       Running   0          17m&#x000A;mysql56-b4f36         1/1       Running   0          9m&#x000A;zk-standalone-4mo02   1/1       Running   0          21m</pre> </div> </div> <div class="paragraph"> <p>Let&#8217;s run a command to get client access to the database. First, set a few environment variables to the pod&#8217;s name and IP address:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ MYSQL_POD_NAME=$(kubectl get pod | grep Running | grep ^mysql | awk '{ print $1 }')&#x000A;$ MYSQL_POD_IP=$(kubectl describe pod $MYSQL_POD_NAME | grep IP | awk '{ print $2 }')</code></pre> </div> </div> <div class="paragraph"> <p>Then, log in to the Kubernetes pod that&#8217;s running the MySQL database, and start the MySQL command client:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl exec -it $MYSQL_POD_NAME   -- /opt/rh/rh-mysql56/root/usr/bin/mysql -h$MYSQL_POD_IP -P3306 -uroot -padmin&#x000A;Warning: Using a password on the command line interface can be insecure.&#x000A;Welcome to the MySQL monitor.  Commands end with ; or \g.&#x000A;Your MySQL connection id is 1&#x000A;Server version: 5.6.26-log MySQL Community Server (GPL)&#x000A;&#x000A;Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.&#x000A;&#x000A;Oracle is a registered trademark of Oracle Corporation and/or its&#x000A;affiliates. Other names may be trademarks of their respective&#x000A;owners.&#x000A;&#x000A;Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.&#x000A;&#x000A;mysql&gt;</code></pre> </div> </div> <div class="paragraph"> <p>This shows that the <code>kubectl</code> command line lets us easily get access to a pod or Docker container regardless of where it&#8217;s running in the cluster.</p> </div> <div class="paragraph"> <p>Next, exit out of the mysql shell (type <code>exit</code>) and run the following command to download a <a href="https://gist.github.com/christian-posta/e20ddb5c945845b4b9f6eba94a98af09/raw">SQL script</a> that populates an <code>inventory</code> sample database:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl exec  -it $MYSQL_POD_NAME -- bash -c "curl -s -L https://gist.github.com/christian-posta/e20ddb5c945845b4b9f6eba94a98af09/raw | /opt/rh/rh-mysql56/root/usr/bin/mysql -h$MYSQL_POD_IP -P3306 -uroot -padmin"</code></pre> </div> </div> <div class="paragraph"> <p>Now, if we log back into the MySQL pod we can show the databases and tables:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl exec -it $MYSQL_POD_NAME   -- /opt/rh/rh-mysql56/root/usr/bin/mysql -h$MYSQL_POD_IP -P3306 -uroot -padmin -e 'use inventory; show tables;'&#x000A;&#x000A;+---------------------+&#x000A;| Tables_in_inventory |&#x000A;+---------------------+&#x000A;| customers           |&#x000A;| orders              |&#x000A;| products            |&#x000A;| products_on_hand    |&#x000A;+---------------------+&#x000A;4 rows in set (0.00 sec)</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="start_kafka_connect_and_debezium"><a class="anchor" href="#start_kafka_connect_and_debezium"></a>Start Kafka Connect and Debezium</h2> <div class="sectionbody"> <div class="paragraph"> <p>Navigate into the directory <code>$PROJECT_ROOT/connect-mysql</code> directory. Here, we&#8217;ll start a Kubernetes pod that runs Kafka Connect with the Debezium MySQL connector already installed. The Debezium MySQL connector connects to a MySQL database, reads the binlog, and writes those row events to Kafka. Start up Kafka Connect with Debezium on Kubernetes similarly to the previous components:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ cd ../connect-mysql&#x000A;$ kubectl create -f target/classes/kubernetes.yml&#x000A;&#x000A;service "connect-mysql" created&#x000A;replicationcontroller "connect-mysql" created</code></pre> </div> </div> <div class="paragraph"> <p>Or with the fabric8 maven plugin:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ cd ../connect-mysql&#x000A;$ mvn fabric8:apply&#x000A;Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=1512m; support was removed in 8.0&#x000A;[INFO] Scanning for projects...&#x000A;[INFO]&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] Building connect-mysql 0.1-SNAPSHOT&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO]&#x000A;[INFO] --- fabric8-maven-plugin:2.2.115:apply (default-cli) @ connect-mysql ---&#x000A;[INFO] Using kubernetes at: https://172.28.128.4:8443/ in namespace ticket&#x000A;[INFO] Kubernetes JSON: /Users/ceposta/dev/idea-workspace/dbz/debezium-kubernetes/connect-mysql/target/classes/kubernetes.json&#x000A;[INFO] OpenShift platform detected&#x000A;[INFO] Using namespace: ticket&#x000A;[INFO] Looking at repo with directory /Users/ceposta/dev/idea-workspace/dbz/debezium-kubernetes/.git&#x000A;[INFO] Creating a Service from kubernetes.json namespace ticket name connect-mysql&#x000A;[INFO] Created Service: connect-mysql/target/fabric8/applyJson/ticket/service-connect-mysql.json&#x000A;[INFO] Creating a ReplicationController from kubernetes.json namespace ticket name connect-mysql&#x000A;[INFO] Created ReplicationController: connect-mysql/target/fabric8/applyJson/ticket/replicationcontroller-connect-mysql.json&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] BUILD SUCCESS&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] Total time: 2.255 s&#x000A;[INFO] Finished at: 2016-05-25T09:21:04-07:00&#x000A;[INFO] Final Memory: 27M/313M&#x000A;[INFO] ------------------------------------------------------------------------</code></pre> </div> </div> <div class="paragraph"> <p>Just like in the Docker tutorial for Debezium, we now want to send a JSON object to the Kafka Connect API to start up our Debezium connector. First, we need to expose the API for the Kafka Connect cluster. You can do this however you want: on Kubernetes (<a href="http://kubernetes.io/docs/user-guide/ingress/">Ingress definitions</a>, <a href="http://kubernetes.io/docs/user-guide/services/">NodePort services</a>, etc) or on OpenShift you can use <a href="https://docs.openshift.com/enterprise/3.2/architecture/core_concepts/routes.html">OpenShift Routes</a>. For this simple example, we&#8217;ll use simple Pod port-forwarding to forward the <code>connect-mysql</code> pod&#8217;s <code>8083</code> port to our local machine (again, regardless of where the Pod is actually running the cluster. (This is such an incredible feature of Kubernetes that makes it so easy to develop distributed services!)</p> </div> <div class="paragraph"> <p>Let&#8217;s determine the pod name and then use port forwarding to our local machine:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ CONNECT_POD_NAME=$(kubectl get pod | grep -i running | grep ^connect | awk '{ print $1 }')&#x000A;$ kubectl port-forward $CONNECT_POD_NAME 8083:8083&#x000A;&#x000A;I0525 09:30:08.390491    6651 portforward.go:213] Forwarding from 127.0.0.1:8083 -&gt; 8083&#x000A;I0525 09:30:08.390631    6651 portforward.go:213] Forwarding from [::1]:8083 -&gt; 8083</code></pre> </div> </div> <div class="paragraph"> <p>We are forwarding the pod&#8217;s port <code>8083</code> to our local machine&#8217;s <code>8083</code>. Now if we hit <code><a href="http://localhost:8083" class="bare">http://localhost:8083</a></code> it will be directed to the pod which runs our Kafka Connect and Debezium services.</p> </div> <div class="paragraph"> <p>Since it may be useful to see the output from the pod to see whether or not there are any exceptions, start another terminal and type the following to follow the Kafka Connect output:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ CONNECT_POD_NAME=$(kubectl get pod | grep -i running | grep ^connect | awk '{ print $1 }')&#x000A;$ kubectl logs -f $CONNECT_POD_NAME</code></pre> </div> </div> <div class="paragraph"> <p>Now, let&#8217;s use an HTTP client to post the Debezium Connector/Task to the endpoint we&#8217;ve just exposed locally:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">curl -i -X POST -H "Accept:application/json" -H "Content-Type:application/json" http://localhost:8083/connectors/ -d '{ "name": "inventory-connector", "config": { "connector.class": "io.debezium.connector.mysql.MySqlConnector", "tasks.max": "1", "database.hostname": "mysql", "database.port": "3306", "database.user": "replicator", "database.password": "replpass", "database.server.id": "184054", "database.server.name": "mysql-server-1", "database.binlog": "mysql-bin.000001", "database.whitelist": "inventory", "database.history.kafka.bootstrap.servers": "kafka:9092", "database.history.kafka.topic": "schema-changes.inventory" } }'</code></pre> </div> </div> <div class="paragraph"> <p>If we&#8217;re watching the log output for the <code>connect-mysql</code> pod, we&#8217;ll see it eventually end up looking something like this:</p> </div> <div class="listingblock"> <div class="content"> <pre class="nowrap">2016-05-27 18:50:14,580 - WARN  [kafka-producer-network-thread | producer-1:NetworkClient$DefaultMetadataUpdater@582] - Error while fetching metadata with correlation id 2 : {mysql-server-1.inventory.products=LEADER_NOT_AVAILABLE}&#x000A;2016-05-27 18:50:14,690 - WARN  [kafka-producer-network-thread | producer-1:NetworkClient$DefaultMetadataUpdater@582] - Error while fetching metadata with correlation id 3 : {mysql-server-1.inventory.products=LEADER_NOT_AVAILABLE}&#x000A;2016-05-27 18:50:14,911 - WARN  [kafka-producer-network-thread | producer-1:NetworkClient$DefaultMetadataUpdater@582] - Error while fetching metadata with correlation id 7 : {mysql-server-1.inventory.products_on_hand=LEADER_NOT_AVAILABLE}&#x000A;2016-05-27 18:50:15,136 - WARN  [kafka-producer-network-thread | producer-1:NetworkClient$DefaultMetadataUpdater@582] - Error while fetching metadata with correlation id 10 : {mysql-server-1.inventory.customers=LEADER_NOT_AVAILABLE}&#x000A;2016-05-27 18:50:15,362 - WARN  [kafka-producer-network-thread | producer-1:NetworkClient$DefaultMetadataUpdater@582] - Error while fetching metadata with correlation id 13 : {mysql-server-1.inventory.orders=LEADER_NOT_AVAILABLE}</pre> </div> </div> <div class="paragraph"> <p>These error are just Kafka&#8217;s way of telling us the topics didn&#8217;t exist but were created.</p> </div> <div class="paragraph"> <p>If we now do a listing of our topics inside Kafka, we should see a Kafka topic for each table in the mysql <code>inventory</code> database:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl exec  $KAFKA_POD_NAME --  /kafka/bin/kafka-topics.sh --list --zookeeper zookeeper:2181&#x000A;__consumer_offsets&#x000A;my-connect-configs&#x000A;my-connect-offsets&#x000A;mysql-server-1.inventory.customers&#x000A;mysql-server-1.inventory.orders&#x000A;mysql-server-1.inventory.products&#x000A;mysql-server-1.inventory.products_on_hand&#x000A;schema-changes.inventory</code></pre> </div> </div> <div class="paragraph"> <p>Let&#8217;s take a look at what&#8217;s in one of these topics:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl exec  $KAFKA_POD_NAME --  /kafka/bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --new-consumer --topic mysql-server-1.inventory.customers --from-beginning --property print.key=true&#x000A;{"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"}],"optional":false,"name":"inventory.customers/pk"},"payload":{"id":1001}}   {"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"},{"type":"string","optional":false,"field":"first_name"},{"type":"string","optional":false,"field":"last_name"},{"type":"string","optional":false,"field":"email"}],"optional":false,"name":"inventory.customers"},"payload":{"id":1001,"first_name":"Sally","last_name":"Thomas","email":"sally.thomas@acme.com"}}&#x000A;{"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"}],"optional":false,"name":"inventory.customers/pk"},"payload":{"id":1002}}   {"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"},{"type":"string","optional":false,"field":"first_name"},{"type":"string","optional":false,"field":"last_name"},{"type":"string","optional":false,"field":"email"}],"optional":false,"name":"inventory.customers"},"payload":{"id":1002,"first_name":"George","last_name":"Bailey","email":"gbailey@foobar.com"}}&#x000A;{"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"}],"optional":false,"name":"inventory.customers/pk"},"payload":{"id":1003}}   {"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"},{"type":"string","optional":false,"field":"first_name"},{"type":"string","optional":false,"field":"last_name"},{"type":"string","optional":false,"field":"email"}],"optional":false,"name":"inventory.customers"},"payload":{"id":1003,"first_name":"Edward","last_name":"Walker","email":"ed@walker.com"}}&#x000A;{"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"}],"optional":false,"name":"inventory.customers/pk"},"payload":{"id":1004}}   {"schema":{"type":"struct","fields":[{"type":"int32","optional":false,"field":"id"},{"type":"string","optional":false,"field":"first_name"},{"type":"string","optional":false,"field":"last_name"},{"type":"string","optional":false,"field":"email"}],"optional":false,"name":"inventory.customers"},"payload":{"id":1004,"first_name":"Anne","last_name":"Kretchmar","email":"annek@noanswer.org"}}</code></pre> </div> </div> <div class="paragraph"> <p>What happened? When we started Debezium&#8217;s MySQL connector, it started reading the binary replication log from the MySQL server, and it replayed all of the history and generated an event for each INSERT, UPDATE, and DELETE operation (though in our sample <code>inventory</code> database we only had INSERTs). If we or some client apps were to commit other changes to the database, Debezium would see those immediately and write those to the correct topic. In other words, Debezium records all of the changes to our MySQL database as events in Kafka topics! And from there, any tool, connector, or service can independnetly consume those event streams from Kafka and process them or put them into a different database, into Hadoop, elasticsearch, data grid, etc.</p> </div> </div> </div> <div class="sect1"> <h2 id="cleanup"><a class="anchor" href="#cleanup"></a>Cleanup</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you want to delete the connector, simply issue a REST request to remove it:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-bash" data-lang="bash">curl -i -X DELETE -H "Accept:application/json" http://localhost:8083/connectors/inventory-connector</code></pre> </div> </div> </div> </div> </div> <hr> <div class="post"> <h1 class="title"> <a href="/blog/2016/04/15/parsing-ddl/">Parsing DDL</a> </h1> <div class="byline"> <p> <em> April 15, 2016 by Randall Hauch </em> <em> under&nbsp; </em> <a class="label label-info" href="/blog/tags/mysql/">mysql</a> <a class="label label-info" href="/blog/tags/sql/">sql</a> </p> </div> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>When our <a href="/docs/connectors/mysql/">MySQL connector</a> is reading the binlog of a MySQL server or cluster, it parses the DDL statements in the log and builds an in-memory model of each table&#8217;s schema as it evolves over time. This process is important because the connector generates events for each table using the definition of the table at the time of each event. We can&#8217;t use the database&#8217;s <em>current</em> schema, since it may have changed since the point in time (or position in the log) where the connector is reading.</p> </div> <div class="paragraph"> <p>Parsing DDL of MySQL or any other major relational database can seem to be a daunting task. Usually each DBMS has a highly-customized SQL grammar, and although the <em>data manipulation language</em> (DML) statements are often fairly close the standards, the <em>data definition language</em> (DDL) statements are usually less so and involve more DBMS-specific features.</p> </div> <div class="paragraph"> <p>So given this, why did we write our own DDL parser for MySQL? Let&#8217;s first look at what Debezium needs a DDL parser to do.</p> </div> </div> </div> <div class="sect1"> <h2 id="parsing_ddl_in_the_debezium_mysql_connector"><a class="anchor" href="#parsing_ddl_in_the_debezium_mysql_connector"></a>Parsing DDL in the Debezium MySQL connector</h2> <div class="sectionbody"> <div class="paragraph"> <p>The MySQL binlog contains various kinds of events. For example, when a row is inserted into a table, the binlog event contains an indirect reference to the table and the values for each column in the table, but there is no information about the columns that make up the table. The only thing in the binlog referencing table structures are SQL DDL statements that were generated by MySQL when it processed user-supplied DDL statements.</p> </div> <div class="paragraph"> <p>The connector also produces messages using Kafka Connect Schemas, which are simple data structures that define the various names and types of each field, and the way the fields are organized. So, when we generate an event message for the table insert, we first have to have a Kafka Connect <code>Schema</code> object with all the appropriate fields, and then we have to convert the ordered array of column values into a Kafka Connect <code>Struct</code> object using the fields and the individual column values in the table insert event.</p> </div> <div class="paragraph"> <p>Luckily, when we come across a DDL statement we can update our in-memory model and then use this to generate a <code>Schema</code> object. At the same time, we can create a component that will use this <code>Schema</code> object to create a <code>Struct</code> object from the ordered array of column values that appear in the events. All of this can be done once and used for all row events on that table, until we come across another DDL statement that changes the table&#8217;s schema at which point we updated our model again.</p> </div> <div class="paragraph"> <p>So all of this requires parsing all of the DDL statements, though for our purposes we only have to <em>understand</em> a small subset of the DDL grammer. We then have to use that subset of statements to update our in-memory model of our tables. And since our in-memory table model is not specific to MySQL, the rest of the functionality to generate <code>Schema</code> objects and components that convert an array of values into <code>Struct</code> objects used in messages is all generic.</p> </div> </div> </div> <div class="sect1"> <h2 id="existing_ddl_libraries"><a class="anchor" href="#existing_ddl_libraries"></a>Existing DDL libraries</h2> <div class="sectionbody"> <div class="paragraph"> <p>Unfortunately, there aren&#8217;t really that many 3rd party open source libraries for parsing DDL statements for MySQL, PostgreSQL, or other popular RDBMSes. <a href="http://jsqlparser.sourceforge.net">JSqlParser</a> is often cited, but it has a <em>single grammar</em> that is a combination of multiple DBMS grammars and therefore is not a strict parser for any specific DBMS. Adding support for other DBMSes by updating the composite grammar would likely be difficult.</p> </div> <div class="paragraph"> <p>Other libraries, such as <a href="https://github.com/prestodb/presto/tree/master/presto-parser">PrestoDB</a>, define their own SQL grammar and are unable to handle the intracacies and nuances of the MySQL DDL grammar. The Antlr parser generator project has a <a href="https://github.com/antlr/grammars-v4/tree/master/mysql">grammar for MySQL 5.6</a>, but this is limited to a small subset of DML and has no support for DDL or newer 5.7 features. There are <a href="http://www.antlr3.org/grammar/list.html">older SQL-related grammars for Antlr 3</a>, but these are often massive, suffer from bugs, and limited to specific DBMSes. The <a href="http://teiid.jboss.org">Teiid project</a> is a data virtualization engine that sits atop a wide variety of DBMSes and data sources, and it&#8217;s tooling has a series of <a href="https://github.com/Teiid-Designer/teiid-modeshape">DDL parsers</a> that construct ASTs in a special repository (the author actually helped develop these). There are also Ruby libraries, like <a href="https://github.com/square/mysql-parser">Square&#8217;s MySQL Parser library</a>. There is also a <a href="http://www.sqlparser.com/sql-parser-java.php">proprietary commercial product</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="our_ddl_parser_framework"><a class="anchor" href="#our_ddl_parser_framework"></a>Our DDL parser framework</h2> <div class="sectionbody"> <div class="paragraph"> <p>Since we couldn&#8217;t find a useful 3rd party open source library, we chose to create our own DDL parser framework limited to our needs:</p> </div> <div class="ulist"> <ul> <li> <p>Parse DDL statements and update our in-memory model.</p> </li> <li> <p>Focus on consuming those essential statements (e.g., create, alter, and drop tables and views), while completely ignoring other statements without having to parse them.</p> </li> <li> <p>Structure the parser code similarly to the <a href="http://dev.mysql.com/doc/refman/5.7/en/sql-syntax-data-definition.html">MySQL DDL grammar documentation</a> and use method names that mirror the rules in the grammar. This will make it easier to maintain over time.</p> </li> <li> <p>Allow creation of parsers for PostgreSQL, Oracle, SQLServer, and other DBMSes as needed.</p> </li> <li> <p>Support customization through subclassing: be able to easily override narrow portions of the logic without having to copy lots of code.</p> </li> <li> <p>Make it easy to develop, debug, and test parsers.</p> </li> </ul> </div> <div class="paragraph"> <p>The resulting framework includes a tokenizer that converts one or more DDL statements in a string into a rewindable sequence of tokens, where each token represents punctuation, quoted strings, case-insentivie words and symbols, numbers, keywords, comments, and terminating characters (such as <code>;</code> for MySQL). The DDL parser, then, walks the token stream looking for patterns using a simple and easy to read fluent API, calling methods on itself to process the various sets of tokens. The parser also uses an internal <a href="https://github.com/debezium/debezium/blob/master/debezium-core/src/main/java/io/debezium/relational/ddl/DataTypeParser.java">data type parser</a> for processing SQL data type expressions, such as <code>INT</code>, <code>VARCHAR(64)</code>, <code>NUMERIC(32,3)</code>, <code>TIMESTAMP(8) WITH TIME ZONE</code>.</p> </div> <div class="paragraph"> <p>The <a href="https://github.com/debezium/debezium/blob/master/debezium-connector-mysql/src/main/java/io/debezium/connector/mysql/MySqlDdlParser.java">MySqlDdlParser</a> class extends a <a href="https://github.com/debezium/debezium/blob/master/debezium-core/src/main/java/io/debezium/relational/ddl/DdlParser.java">base class</a> and provides all of the MySQL-specific parsing logic. For example, the DDL statements:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-sql" data-lang="sql"># Create and populate our products using a single insert with many rows&#x000A;CREATE TABLE products (&#x000A;  id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,&#x000A;  name VARCHAR(255) NOT NULL,&#x000A;  description VARCHAR(512),&#x000A;  weight FLOAT&#x000A;);&#x000A;ALTER TABLE products AUTO_INCREMENT = 101;&#x000A;&#x000A;# Create and populate the products on hand using multiple inserts&#x000A;CREATE TABLE products_on_hand (&#x000A;  product_id INTEGER NOT NULL PRIMARY KEY,&#x000A;  quantity INTEGER NOT NULL,&#x000A;  FOREIGN KEY (product_id) REFERENCES products(id)&#x000A;);</code></pre> </div> </div> <div class="paragraph"> <p>can be easily parsed with:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-java" data-lang="java">String ddlStatements = ...&#x000A;DdlParser parser = new MySqlDdlParser();&#x000A;Tables tables = new Tables();&#x000A;parser.parse(ddl, tables);</code></pre> </div> </div> <div class="paragraph"> <p>Here, the <code>Tables</code> object is our in-memory representation of our named table definitions. The parser processes the DDL statements, applying each to the appropriate table definition inside the <code>Tables</code> object.</p> </div> </div> </div> <div class="sect1"> <h2 id="how_it_works"><a class="anchor" href="#how_it_works"></a>How it works</h2> <div class="sectionbody"> <div class="paragraph"> <p>Each <code>DdlParser</code> implementation has the following public method that will parse the statements in the supplied String:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-java" data-lang="java">    public final void parse(String ddlContent, Tables databaseTables) {&#x000A;        Tokenizer tokenizer = new DdlTokenizer(!skipComments(), this::determineTokenType);&#x000A;        TokenStream stream = new TokenStream(ddlContent, tokenizer, false);&#x000A;        stream.start();&#x000A;        parse(stream, databaseTables);&#x000A;    }</code></pre> </div> </div> <div class="paragraph"> <p>Here, the method creates a new <code>TokenStream</code> from the content using a <code>DdlTokenizer</code> that knows how to separate the characters in the string into the various typed token objects. It then calls another <code>parse</code> method that does the bulk of the work:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-java" data-lang="java">    public final void parse(TokenStream ddlContent, Tables databaseTables)&#x000A;                           throws ParsingException, IllegalStateException {&#x000A;        this.tokens = ddlContent;&#x000A;        this.databaseTables = databaseTables;&#x000A;        Marker marker = ddlContent.mark();&#x000A;        try {&#x000A;            while (ddlContent.hasNext()) {&#x000A;                parseNextStatement(ddlContent.mark());&#x000A;                // Consume the statement terminator if it is still there ...&#x000A;                tokens.canConsume(DdlTokenizer.STATEMENT_TERMINATOR);&#x000A;            }&#x000A;        } catch (ParsingException e) {&#x000A;            ddlContent.rewind(marker);&#x000A;            throw e;&#x000A;        } catch (Throwable t) {&#x000A;            parsingFailed(ddlContent.nextPosition(),&#x000A;                          "Unexpected exception (" + t.getMessage() + ") parsing", t);&#x000A;        }&#x000A;    }</code></pre> </div> </div> <div class="paragraph"> <p>This sets up some local state, marks the current starting point, and tries to parse DDL statements until no more can be found. If the parsing logic fails to find a match, it generates a <code>ParsingException</code> with the offending line and column plus a message signaling what was found and what was expected. In such cases, this method rewinds the token stream (in case the caller wishes to try an alternative different parser).</p> </div> <div class="paragraph"> <p>Each time the <code>parseNextStatement</code> method is called, the starting position of that statement is passed into the method, giving it the starting position of the statement. Our <code>MySqlDdlParser</code> subclass overrides the <code>parseNextStatement</code> method to use the first token in the statement to determine the kinds of statement allowed in the MySQL DDL grammar:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-java" data-lang="java">    @Override&#x000A;    protected void parseNextStatement(Marker marker) {&#x000A;        if (tokens.matches(DdlTokenizer.COMMENT)) {&#x000A;            parseComment(marker);&#x000A;        } else if (tokens.matches("CREATE")) {&#x000A;            parseCreate(marker);&#x000A;        } else if (tokens.matches("ALTER")) {&#x000A;            parseAlter(marker);&#x000A;        } else if (tokens.matches("DROP")) {&#x000A;            parseDrop(marker);&#x000A;        } else if (tokens.matches("RENAME")) {&#x000A;            parseRename(marker);&#x000A;        } else {&#x000A;            parseUnknownStatement(marker);&#x000A;        }&#x000A;    }</code></pre> </div> </div> <div class="paragraph"> <p>When a matching token is found, the method calls the appropriate method. For example, if the statement begins with <code>CREATE TABLE &#8230;&#8203;</code>, then the <code>parseCreate</code> method is called with the same marker that identifies the starting position of the statement:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-java" data-lang="java">    @Override&#x000A;    protected void parseCreate(Marker marker) {&#x000A;        tokens.consume("CREATE");&#x000A;        if (tokens.matches("TABLE") || tokens.matches("TEMPORARY", "TABLE")) {&#x000A;            parseCreateTable(marker);&#x000A;        } else if (tokens.matches("VIEW")) {&#x000A;            parseCreateView(marker);&#x000A;        } else if (tokens.matchesAnyOf("DATABASE", "SCHEMA")) {&#x000A;            parseCreateUnknown(marker);&#x000A;        } else if (tokens.matchesAnyOf("EVENT")) {&#x000A;            parseCreateUnknown(marker);&#x000A;        } else if (tokens.matchesAnyOf("FUNCTION", "PROCEDURE")) {&#x000A;            parseCreateUnknown(marker);&#x000A;        } else if (tokens.matchesAnyOf("UNIQUE", "FULLTEXT", "SPATIAL", "INDEX")) {&#x000A;            parseCreateIndex(marker);&#x000A;        } else if (tokens.matchesAnyOf("SERVER")) {&#x000A;            parseCreateUnknown(marker);&#x000A;        } else if (tokens.matchesAnyOf("TABLESPACE")) {&#x000A;            parseCreateUnknown(marker);&#x000A;        } else if (tokens.matchesAnyOf("TRIGGER")) {&#x000A;            parseCreateUnknown(marker);&#x000A;        } else {&#x000A;            // It could be several possible things (including more&#x000A;            // elaborate forms of those matches tried above),&#x000A;            sequentially(this::parseCreateView,&#x000A;                         this::parseCreateUnknown);&#x000A;        }&#x000A;    }</code></pre> </div> </div> <div class="paragraph"> <p>Here, the method first consumes the token with the <code>CREATE</code> literal, and then tries to match the tokens with various patterns of token literals. If a match is found, this method delegates to other more specific parsing methods. Note how the fluent API of the framework makes it quite easy to understand the match patterns.</p> </div> <div class="paragraph"> <p>Let&#8217;s go one step further. Assuming our DDL statement starts with <code>CREATE TABLE products (</code>, then the parser will then invoke the <code>parseCreateTable</code> method, again with the same marker denoting the start of the statement:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-java" data-lang="java">    protected void parseCreateTable(Marker start) {&#x000A;        tokens.canConsume("TEMPORARY");&#x000A;        tokens.consume("TABLE");&#x000A;        boolean onlyIfNotExists = tokens.canConsume("IF", "NOT", "EXISTS");&#x000A;        TableId tableId = parseQualifiedTableName(start);&#x000A;        if ( tokens.canConsume("LIKE")) {&#x000A;            TableId originalId = parseQualifiedTableName(start);&#x000A;            Table original = databaseTables.forTable(originalId);&#x000A;            if ( original != null ) {&#x000A;                databaseTables.overwriteTable(tableId, original.columns(),&#x000A;                                              original.primaryKeyColumnNames());&#x000A;            }&#x000A;            consumeRemainingStatement(start);&#x000A;            debugParsed(start);&#x000A;            return;&#x000A;        }&#x000A;        if (onlyIfNotExists &amp;&amp; databaseTables.forTable(tableId) != null) {&#x000A;            // The table does exist, so we should do nothing ...&#x000A;            consumeRemainingStatement(start);&#x000A;            debugParsed(start);&#x000A;            return;&#x000A;        }&#x000A;        TableEditor table = databaseTables.editOrCreateTable(tableId);&#x000A;&#x000A;        // create_definition ...&#x000A;        if (tokens.matches('(')) parseCreateDefinitionList(start, table);&#x000A;        // table_options ...&#x000A;        parseTableOptions(start, table);&#x000A;        // partition_options ...&#x000A;        if (tokens.matches("PARTITION")) {&#x000A;            parsePartitionOptions(start, table);&#x000A;        }&#x000A;        // select_statement&#x000A;        if (tokens.canConsume("AS") || tokens.canConsume("IGNORE", "AS")&#x000A;            || tokens.canConsume("REPLACE", "AS")) {&#x000A;            parseAsSelectStatement(start, table);&#x000A;        }&#x000A;&#x000A;        // Update the table definition ...&#x000A;        databaseTables.overwriteTable(table.create());&#x000A;        debugParsed(start);&#x000A;    }</code></pre> </div> </div> <div class="paragraph"> <p>This method tries to mirror the <a href="http://dev.mysql.com/doc/refman/5.7/en/create-table.html">MySQL <code>CREATE TABLE</code> grammar rules</a>, which start with:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlight"><code class="language-sql" data-lang="sql">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name&#x000A;    (create_definition,...)&#x000A;    [table_options]&#x000A;    [partition_options]&#x000A;&#x000A;CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name&#x000A;    [(create_definition,...)]&#x000A;    [table_options]&#x000A;    [partition_options]&#x000A;    select_statement&#x000A;&#x000A;CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name&#x000A;    { LIKE old_tbl_name | (LIKE old_tbl_name) }&#x000A;&#x000A;create_definition:&#x000A;    ...</code></pre> </div> </div> <div class="paragraph"> <p>The <code>CREATE</code> literal was already consumed before our <code>parseCreateTable</code> begins, so it first tries to consume the <code>TEMPORARY</code> literal if available, the <code>TABLE</code> literal, the <code>IF NOT EXISTS</code> fragment if avaialble, and then consumes and parses the qualified name of the table. If the statement includes <code>LIKE otherTable</code>, it uses the <code>databaseTables</code> (which is the reference to our <code>Tables</code> object) to overwrite the definition of the named table with that of the referenced table. Otherwise, it obtains an editor for the new table, and then (like the grammar rules) parses a list of <em>create_definition</em> fragments, followed by <em>table_options</em>, <em>partition_options</em>, and possibly a <em>select_statement</em>.</p> </div> <div class="paragraph"> <p>Take a look at the full <a href="https://github.com/debezium/debezium/blob/master/debezium-connector-mysql/src/main/java/io/debezium/connector/mysql/MySqlDdlParser.java">MySqlDdlParser</a> class to see far more details.</p> </div> </div> </div> <div class="sect1"> <h2 id="wrap_up"><a class="anchor" href="#wrap_up"></a>Wrap up</h2> <div class="sectionbody"> <div class="paragraph"> <p>This post goes into some detail about why the MySQL connector uses the DDL statements in the binlog, though we only scratched the surface about <em>how</em> the connector does the DDL parsing with its framework, and how that can be reused in future parsers for other DBMS dialects.</p> </div> <div class="paragraph"> <p>Try our <a href="/docs/tutorial/">tutorial</a> to see the MySQL connector in action, and stay tuned for more connectors, releases, and news.</p> </div> </div> </div> </div> <hr> <div class="post"> <h1 class="title"> <a href="/blog/2016/04/14/Debezium-website/">Debezium Website</a> </h1> <div class="byline"> <p> <em> April 14, 2016 by Randall Hauch </em> <em> under&nbsp; </em> <a class="label label-info" href="/blog/tags/website/">website</a> </p> </div> <div class="paragraph"> <p>As you may have noticed, we have a <a href="http://debezium.io">new website</a> with <a href="/docs/">documentation</a>, a <a href="/blog/">blog</a>, and information about the <a href="/community/">Debezium community</a> and how you can <a href="/docs/contribute/">contribute</a>. Let us know what you think, and <a href="/docs/contribute/">contribute improvements</a>.</p> </div> </div> <hr> <ul class="pager"> <li class="previous"> <a href="/blog/page/13/">&laquo; Older</a> </li> <li class="pages">Page 12 of 13</li> <li class="next"> <a href="/blog/page/11/">Newer &raquo;</a> </li> </ul> </div> </div> </div> </div> <footer class="container"> <div class="row"> <div class="col-md-5 col-md-offset-1"> <h4>Debezium</h4> <p> &#169; 2019 Debezium Community <br> <br> <i class="icon-fire"></i> Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>, baked by <a href="http://awestruct.org">Awestruct</a>. <br> <i class="icon-flag"></i> Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>. <br> <i class="icon-flag-alt"></i> Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>. <br> <i class="icon-file-alt"></i> <a href="https://www.redhat.com/legal/legal_statement.html" title="Terms">Terms</a> | <a href="https://www.redhat.com/legal/privacy_statement.html" title="Privacy Policy">Privacy</a> </p> </div> <div class="col-md-3"> <h4>Documentation</h4> <ul class="list-unstyled"> <li> <a href="/docs/features/" title="Features">Features</a> </li> <li> <a href="/docs/install/" title="Install">Install</a> </li> <li> <a href="/docs/manage/" title="Manage">Manage</a> </li> <li> <a href="/docs/architecture/" title="Architecture">Architecture</a> </li> <li> <a href="/docs/faq/" title="FAQ">FAQ</a> </li> <li> <a href="/docs/contribute/" title="Contribute">Contribute</a> </li> </ul> </div> <div class="col-md-3"> <h4>Connect</h4> <ul class="list-unstyled"> <li> <a href="/blog" title="Blog">Blog</a> </li> <li> <a href="http://twitter.com/debezium" title="Twitter">Twitter</a> </li> <li> <a href="http://github.com/debezium" title="GitHub">GitHub</a> </li> <li> <a href="https://gitter.im/debezium/dev" title="Chat">Chat</a> </li> <li> <a href="https://groups.google.com/forum/#!forum/debezium" title="Google Groups">Google Groups</a> </li> <li> <a href="http://stackoverflow.com/questions/tagged/debezium" title="StackOverflow">StackOverflow</a> </li> </ul> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="https://www.redhat.com/"><img src="https://static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="https://static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.2/bootstrap-community.min.js"></script> <script type='text/javascript' language='JavaScript' src='https://www.redhat.com/j/elqNow/elqCfg.js'></script> <script type='text/javascript' language='JavaScript' src='https://www.redhat.com/j/elqNow/elqImg.js'></script> <div id="oTags"> <script type="text/javascript" src="//www.redhat.com/j/s_code.js"></script> <script type="text/javascript"><!--
        var coreUrl = encodeURI(document.URL.split("?")[0]).replace(/-/g," ");
        var urlSplit = coreUrl.toLowerCase().split(/\//);
        var urlLast = urlSplit[urlSplit.length-1];
        var pageNameString = "";
        var siteName = "";
        var minorSectionIndex = 3
        if (urlLast == "") {
            urlSplit.splice(-1,1);
        }
        if (urlLast.search(/\./) >= 0) {
            if (urlLast == "index.html") {
                urlSplit.splice(-1,1);
            }
            else {
                urlSplit[urlSplit.length-1] = urlLast.split(".").splice(0,1);
            }
        }
        siteName = urlSplit[2].split(".")[1];
        s.prop14 = s.eVar27 = siteName || "";
        s.prop15 = s.eVar28 = urlSplit[minorSectionIndex] || "";
        s.prop16 = s.eVar29 = urlSplit[minorSectionIndex+1] || "";
        pageNameString = urlSplit.splice(3).join(" | ");
        s.pageName = "jboss | community | " + siteName + " | " + pageNameString;
        s.server = "jboss";
        s.channel = "jboss | community";
        s.prop4 = s.eVar23 = encodeURI(document.URL);
        s.prop21 = s.eVar18 = coreUrl;
        s.prop2 = s.eVar22 = "en";
        s.prop3 = s.eVar19 = "us";
        //--></script> <script type="text/javascript" src="//www.redhat.com/j/rh_omni_footer.js"></script> <script language="JavaScript" type="text/javascript"><!--
        if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
        //--></script> <noscript><a href="http://www.omniture.com" title="Web Analytics"><img src="https://smtrcs.redhat.com/b/ss/redhatcom,redhatglobal/1/H.25.4--NS/0?[AQB]&cdp=3&[AQE]" height="1" width="1" border="0" alt=""/></a></noscript> </div> <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      </script> <script type="text/javascript">
      try {
      var pageTracker = _gat._getTracker("UA-10656779-1");
      pageTracker._trackPageview();
      } catch(err) {}</script> <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       
      ga('create', 'UA-76464546-1', 'auto');
      ga('send', 'pageview');
      ga('set', 'anonymizeIp', true);
      ga('require', 'linkid', 'linkid.js');
      
      </script> </div> </body> </html>